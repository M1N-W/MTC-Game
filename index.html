<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MTC the Game (Beta Edition)</title>

    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="MTC Game">

    <link rel="apple-touch-icon" href="favicon.svg">
    <link rel="alternate icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%231e293b'/><text x='50' y='70' font-family='Arial' font-size='60' font-weight='bold' fill='%233b82f6' text-anchor='middle'>M</text></svg>">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Orbitron:wght@700;900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            font-family: 'Inter', sans-serif;
            color: white;
            user-select: none;
            -webkit-user-select: none;
            touch-action: none;
        }

        #gameCanvas {
            display: block;
            width: 100vw;
            height: 100vh;
            cursor: crosshair;
        }

        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 15px;
            z-index: 10;
        }

        .hud-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 10px;
        }

        .player-card {
            display: flex;
            gap: 12px;
            background: rgba(15, 23, 42, 0.9);
            padding: 10px 15px;
            border-radius: 12px;
            border: 1px solid #334155;
            backdrop-filter: blur(6px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }

        .status-bars {
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-width: 150px;
        }

        .bar-wrap {
            height: 8px;
            background: #1e293b;
            border-radius: 4px;
            margin: 3px 0;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            transition: width 0.1s linear;
        }

        .hp-fill {
            background: linear-gradient(90deg, #ef4444, #dc2626);
            box-shadow: 0 0 10px #ef4444;
        }

        .en-fill {
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            box-shadow: 0 0 10px #fbbf24;
        }

        .level-info {
            margin-top: 8px;
        }

        .level-display {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        #player-level {
            font-weight: bold;
            color: #8b5cf6;
            font-size: 14px;
            background: rgba(139, 92, 246, 0.2);
            padding: 2px 8px;
            border-radius: 8px;
            border: 1px solid #8b5cf6;
        }

        .exp-bar-bg {
            flex: 1;
            height: 6px;
            background: #1e293b;
            border-radius: 3px;
            overflow: hidden;
            border: 1px solid #334155;
        }

        #exp-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6, #a855f7);
            box-shadow: 0 0 10px #8b5cf6;
            transition: width 0.3s ease-out;
        }

        .stats-box {
            text-align: right;
            background: rgba(15, 23, 42, 0.9);
            padding: 10px 15px;
            border-radius: 12px;
            border: 1px solid #334155;
            backdrop-filter: blur(6px);
        }

        .score-num {
            font-family: 'Orbitron', sans-serif;
            font-size: 28px;
            color: #60a5fa;
            text-shadow: 0 0 15px rgba(96, 165, 250, 0.5);
        }

        .wave-badge {
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin-top: 5px;
            display: inline-block;
        }

        .weapon-indicator {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(15, 23, 42, 0.95);
            padding: 12px 24px;
            border-radius: 15px;
            border: 2px solid #3b82f6;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.5);
            font-size: 18px;
            font-weight: bold;
            pointer-events: none;
            z-index: 15;
        }

        .weapon-name {
            color: #60a5fa;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .weapon-hint {
            font-size: 11px;
            color: #94a3b8;
            margin-top: 4px;
            text-align: center;
        }

        /* Database Interaction Prompt */
        #db-prompt {
            position: absolute;
            bottom: 160px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(6, 182, 212, 0.15);
            border: 2px solid #06b6d4;
            border-radius: 16px;
            padding: 10px 22px;
            font-size: 14px;
            font-weight: bold;
            color: #67e8f9;
            text-align: center;
            pointer-events: none;
            z-index: 20;
            display: none;
            backdrop-filter: blur(4px);
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.3);
            animation: dbPulse 1.5s ease-in-out infinite;
            white-space: nowrap;
        }

        @keyframes dbPulse {

            0%,
            100% {
                box-shadow: 0 0 12px rgba(6, 182, 212, 0.3);
            }

            50% {
                box-shadow: 0 0 28px rgba(6, 182, 212, 0.7);
            }
        }

        /* Admin Console Interaction Prompt */
        #console-prompt {
            position: absolute;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 255, 65, 0.08);
            border: 2px solid #00ff41;
            border-radius: 16px;
            padding: 10px 22px;
            font-size: 14px;
            font-weight: bold;
            color: #00ff41;
            text-align: center;
            pointer-events: none;
            z-index: 20;
            display: none;
            backdrop-filter: blur(4px);
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.25);
            animation: consolePulse 1.5s ease-in-out infinite;
            white-space: nowrap;
            font-family: 'Courier New', monospace;
        }

        @keyframes consolePulse {

            0%,
            100% {
                box-shadow: 0 0 12px rgba(0, 255, 65, 0.25);
            }

            50% {
                box-shadow: 0 0 28px rgba(0, 255, 65, 0.6);
            }
        }

        /* Shop Interaction Prompt */
        #shop-prompt {
            position: absolute;
            bottom: 200px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(250, 204, 21, 0.12);
            border: 2px solid #facc15;
            border-radius: 16px;
            padding: 10px 22px;
            font-size: 14px;
            font-weight: bold;
            color: #fef08a;
            text-align: center;
            pointer-events: none;
            z-index: 20;
            display: none;
            backdrop-filter: blur(4px);
            box-shadow: 0 0 20px rgba(250, 204, 21, 0.25);
            animation: shopPulse 1.5s ease-in-out infinite;
            white-space: nowrap;
        }

        @keyframes shopPulse {

            0%,
            100% {
                box-shadow: 0 0 12px rgba(250, 204, 21, 0.25);
            }

            50% {
                box-shadow: 0 0 30px rgba(250, 204, 21, 0.6);
            }
        }

        /* Resume Prompt Overlay */
        #resume-prompt {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.65);
            z-index: 9000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(6px);
            pointer-events: auto;
            cursor: pointer;
        }

        .resume-prompt-inner {
            background: rgba(15, 23, 42, 0.98);
            border: 2px solid #06b6d4;
            border-radius: 20px;
            padding: 44px 56px;
            text-align: center;
            box-shadow: 0 0 60px rgba(6, 182, 212, 0.45), 0 25px 50px rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
            pointer-events: auto;
            animation: resumePulse 2s ease-in-out infinite;
        }

        @keyframes resumePulse {

            0%,
            100% {
                box-shadow: 0 0 40px rgba(6, 182, 212, 0.35), 0 25px 50px rgba(0, 0, 0, 0.8);
            }

            50% {
                box-shadow: 0 0 70px rgba(6, 182, 212, 0.65), 0 25px 50px rgba(0, 0, 0, 0.8);
            }
        }

        .resume-icon {
            font-size: 52px;
            line-height: 1;
        }

        .resume-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 26px;
            color: #67e8f9;
            letter-spacing: 3px;
        }

        .resume-sub {
            font-size: 14px;
            color: #94a3b8;
            line-height: 1.6;
        }

        .resume-btn {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
            color: #001a20;
            border: none;
            padding: 14px 44px;
            font-size: 19px;
            font-family: 'Kanit', sans-serif;
            font-weight: bold;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 0 24px rgba(6, 182, 212, 0.55);
            margin-top: 6px;
            letter-spacing: 1px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .resume-btn:hover {
            transform: scale(1.06) translateY(-2px);
            box-shadow: 0 0 40px rgba(6, 182, 212, 0.85);
        }

        .resume-hint {
            font-size: 12px;
            color: #475569;
            letter-spacing: 1px;
        }

        /* Pause Indicator */
        #pause-indicator {
            display: none;
            position: fixed;
            top: 18px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(6, 182, 212, 0.15);
            border: 1.5px solid #06b6d4;
            border-radius: 12px;
            padding: 5px 16px;
            font-size: 12px;
            font-weight: bold;
            color: #67e8f9;
            letter-spacing: 2px;
            z-index: 9001;
            pointer-events: none;
        }

        /* Admin Console Overlay */
        #admin-console {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.88);
            z-index: 9800;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(4px);
            pointer-events: auto;
        }

        .console-inner {
            position: relative;
            width: min(760px, 92vw);
            max-height: 85vh;
            background: #000;
            border: 2px solid #00ff41;
            border-radius: 8px;
            box-shadow:
                0 0 0 1px #003d10,
                0 0 40px rgba(0, 255, 65, 0.45),
                0 0 80px rgba(0, 255, 65, 0.15),
                inset 0 0 60px rgba(0, 255, 65, 0.04);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            font-family: 'Courier New', Courier, monospace;

            /* Entrance animation */
            opacity: 0;
            transform: scale(0.96) translateY(12px);
            transition: opacity 0.2s ease-out, transform 0.2s ease-out;
        }

        .console-inner.console-visible {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        /* CRT scanlines overlay */
        .console-inner::before {
            content: '';
            position: absolute;
            inset: 0;
            background: repeating-linear-gradient(0deg,
                    rgba(0, 0, 0, 0.12) 0px,
                    rgba(0, 0, 0, 0.12) 1px,
                    transparent 1px,
                    transparent 2px);
            pointer-events: none;
            z-index: 10;
            border-radius: 6px;
        }

        /* Phosphor flicker */
        @keyframes phosphorFlicker {

            0%,
            98%,
            100% {
                opacity: 1;
            }

            99% {
                opacity: 0.88;
            }
        }

        .console-inner {
            animation: phosphorFlicker 6s infinite;
        }

        /* Console title bar */
        .console-titlebar {
            background: #001a08;
            border-bottom: 1px solid #00ff41;
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .console-titlebar-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .console-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .dot-red {
            background: #ff5f57;
        }

        .dot-amber {
            background: #febc2e;
        }

        .dot-green {
            background: #28c840;
        }

        .console-title-text {
            color: #00ff41;
            font-size: 12px;
            letter-spacing: 3px;
            text-transform: uppercase;
        }

        .console-close-btn {
            background: transparent;
            border: 1px solid #00ff41;
            color: #00ff41;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            padding: 2px 10px;
            border-radius: 4px;
            cursor: pointer;
            letter-spacing: 1px;
            transition: background 0.15s, color 0.15s;
            touch-action: manipulation;
        }

        .console-close-btn:hover {
            background: #00ff41;
            color: #000;
        }

        /* Boot text */
        .console-boot {
            padding: 14px 20px 0;
            flex-shrink: 0;
        }

        .console-boot-line {
            color: #00aa2a;
            font-size: 11px;
            letter-spacing: 1px;
            line-height: 1.7;
        }

        .console-boot-line.highlight {
            color: #00ff41;
        }

        .console-boot-line.dim {
            color: #004d14;
        }

        .console-divider {
            border: none;
            border-top: 1px solid #003d10;
            margin: 10px 20px;
        }

        /* Output log area */
        #console-output {
            flex: 1;
            overflow-y: auto;
            padding: 0 20px 10px;
            display: flex;
            flex-direction: column;
            gap: 3px;
            min-height: 180px;
            max-height: 340px;
            scrollbar-width: thin;
            scrollbar-color: #00ff41 #001a08;
        }

        #console-output::-webkit-scrollbar {
            width: 6px;
        }

        #console-output::-webkit-scrollbar-track {
            background: #001a08;
        }

        #console-output::-webkit-scrollbar-thumb {
            background: #00ff41;
            border-radius: 3px;
        }

        .console-line {
            font-size: 13px;
            line-height: 1.55;
            white-space: pre-wrap;
            word-break: break-all;
        }

        .cline-info {
            color: #00aa2a;
        }

        .cline-ok {
            color: #00ff41;
        }

        .cline-error {
            color: #ff4444;
        }

        .cline-warn {
            color: #fbbf24;
        }

        .cline-cmd {
            color: #67e8f9;
        }

        .cline-sys {
            color: #004d14;
        }

        /* Input row */
        .console-input-row {
            display: flex;
            align-items: center;
            padding: 10px 20px 14px;
            border-top: 1px solid #003d10;
            gap: 8px;
            flex-shrink: 0;
        }

        .console-prompt-symbol {
            color: #00ff41;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
            flex-shrink: 0;
            user-select: none;
        }

        #console-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: #00ff41;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
            caret-color: #00ff41;
            letter-spacing: 1px;
            /* Override browser defaults for user-select */
            user-select: text;
            -webkit-user-select: text;
        }

        #console-input::placeholder {
            color: #003d14;
        }

        /* Blinking cursor is provided natively by the input caret;
           add a fake blinking block after the input for flair */
        @keyframes blink {

            0%,
            49% {
                opacity: 1;
            }

            50%,
            100% {
                opacity: 0;
            }
        }

        .console-cursor {
            display: inline-block;
            width: 9px;
            height: 14px;
            background: #00ff41;
            animation: blink 1s step-start infinite;
            vertical-align: middle;
            flex-shrink: 0;
        }

        /* Help footer */
        .console-help {
            padding: 6px 20px 12px;
            display: flex;
            gap: 18px;
            flex-wrap: wrap;
            border-top: 1px dashed #002810;
            flex-shrink: 0;
        }

        .help-cmd {
            font-size: 10px;
            color: #005a1c;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
        }

        .help-cmd span {
            color: #00aa2a;
        }

        /* Shop Modal */
        #shop-modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.72);
            z-index: 9500;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(8px);
            pointer-events: auto;
        }

        .shop-inner {
            background: linear-gradient(160deg, #1c1404 0%, #0f172a 50%, #1c1404 100%);
            border: 2px solid #facc15;
            border-radius: 24px;
            padding: 36px 40px;
            width: min(680px, 94vw);
            max-height: 90vh;
            overflow-y: auto;
            box-shadow:
                0 0 60px rgba(250, 204, 21, 0.30),
                0 30px 60px rgba(0, 0, 0, 0.9);
            position: relative;
            opacity: 0;
            transform: translateY(30px) scale(0.96);
            transition: opacity 0.25s ease-out, transform 0.25s ease-out;
        }

        .shop-inner.shop-visible {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .shop-inner::before,
        .shop-inner::after {
            content: '‚ú¶';
            position: absolute;
            font-size: 20px;
            color: #facc15;
            opacity: 0.5;
        }

        .shop-inner::before {
            top: 16px;
            left: 20px;
        }

        .shop-inner::after {
            bottom: 16px;
            right: 20px;
        }

        .shop-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(250, 204, 21, 0.25);
            flex-wrap: wrap;
            gap: 12px;
        }

        .shop-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 24px;
            color: #facc15;
            letter-spacing: 3px;
            text-shadow: 0 0 20px rgba(250, 204, 21, 0.6);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .shop-title-icon {
            font-size: 28px;
        }

        .shop-score-info {
            font-size: 14px;
            color: #94a3b8;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .shop-score-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 20px;
            color: #60a5fa;
            background: rgba(96, 165, 250, 0.1);
            padding: 4px 14px;
            border-radius: 8px;
            border: 1px solid rgba(96, 165, 250, 0.3);
        }

        .shop-close-btn {
            background: rgba(239, 68, 68, 0.1);
            border: 1.5px solid rgba(239, 68, 68, 0.4);
            color: #f87171;
            width: 38px;
            height: 38px;
            border-radius: 10px;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.15s;
            flex-shrink: 0;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .shop-close-btn:hover {
            background: rgba(239, 68, 68, 0.25);
            border-color: #ef4444;
            transform: scale(1.1);
        }

        .shop-subtitle {
            text-align: center;
            font-size: 13px;
            color: #64748b;
            margin-bottom: 20px;
            letter-spacing: 1px;
        }

        #shop-items {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        @media (max-width: 560px) {
            #shop-items {
                grid-template-columns: 1fr;
            }

            .shop-inner {
                padding: 24px 20px;
            }

            .shop-title {
                font-size: 18px;
            }
        }

        .shop-card {
            background: rgba(15, 23, 42, 0.85);
            border: 1.5px solid #334155;
            border-radius: 16px;
            padding: 22px 16px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            transition: border-color 0.2s, box-shadow 0.2s, transform 0.15s;
            position: relative;
        }

        .shop-card:hover {
            border-color: #facc15;
            box-shadow: 0 0 20px rgba(250, 204, 21, 0.2);
            transform: translateY(-3px);
        }

        .shop-card-disabled {
            opacity: 0.45;
            pointer-events: none;
        }

        .shop-card-active {
            border-color: #22c55e !important;
            box-shadow: 0 0 18px rgba(34, 197, 94, 0.35) !important;
        }

        .shop-card-icon {
            font-size: 42px;
            line-height: 1;
            filter: drop-shadow(0 0 8px currentColor);
        }

        .shop-card-name {
            font-family: 'Orbitron', sans-serif;
            font-size: 12px;
            color: #e2e8f0;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .shop-card-desc {
            font-size: 12px;
            color: #94a3b8;
            line-height: 1.5;
            min-height: 36px;
        }

        .shop-duration {
            font-size: 11px;
            color: #a78bfa;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 8px;
            padding: 2px 8px;
        }

        .shop-card-cost {
            display: flex;
            align-items: center;
            gap: 6px;
            font-family: 'Orbitron', sans-serif;
            font-size: 16px;
            color: #fbbf24;
        }

        .shop-cost-icon {
            font-size: 16px;
        }

        .shop-buy-btn {
            --shop-btn-color: #facc15;
            background: transparent;
            border: 2px solid var(--shop-btn-color);
            color: var(--shop-btn-color);
            padding: 8px 24px;
            border-radius: 10px;
            font-family: 'Kanit', sans-serif;
            font-size: 15px;
            font-weight: bold;
            letter-spacing: 2px;
            cursor: pointer;
            width: 100%;
            transition: background 0.15s, color 0.15s, box-shadow 0.15s, transform 0.1s;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .shop-buy-btn:not(:disabled):hover {
            background: var(--shop-btn-color);
            color: #0f172a;
            box-shadow: 0 0 20px var(--shop-btn-color);
            transform: scale(1.04);
        }

        .shop-buy-btn:not(:disabled):active {
            transform: scale(0.97);
        }

        .shop-buy-btn:disabled {
            opacity: 0.35;
            cursor: not-allowed;
            border-color: #475569;
            color: #475569;
        }

        .shop-buff-timer {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: #22c55e;
            color: #052e16;
            font-size: 10px;
            font-weight: bold;
            padding: 2px 10px;
            border-radius: 10px;
            white-space: nowrap;
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.5);
        }

        .shop-footer {
            margin-top: 22px;
            text-align: center;
            font-size: 12px;
            color: #475569;
            letter-spacing: 1px;
            padding-top: 16px;
            border-top: 1px solid rgba(250, 204, 21, 0.1);
        }

        /* Achievements */
        #achievements {
            position: absolute;
            top: 80px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
            z-index: 100;
        }

        .achievement {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            padding: 12px 20px;
            border-radius: 12px;
            border: 2px solid #fff;
            box-shadow: 0 4px 20px rgba(251, 191, 36, 0.6);
            animation: slideIn 0.5s ease-out;
            max-width: 300px;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .achievement-title {
            font-size: 16px;
            font-weight: bold;
            color: #000;
        }

        .achievement-desc {
            font-size: 12px;
            color: #422006;
        }

        /* Boss HUD */
        #boss-hud {
            position: absolute;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            max-width: 600px;
            display: none;
            flex-direction: column;
            align-items: center;
            opacity: 0;
            transition: opacity 0.5s;
        }

        #boss-hud.active {
            display: flex;
            opacity: 1;
        }

        .boss-name {
            font-size: 22px;
            font-weight: bold;
            color: #ef4444;
            text-transform: uppercase;
            text-shadow: 0 0 10px black, 0 2px 4px rgba(0, 0, 0, 0.8);
            margin-bottom: 8px;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-badge {
            font-size: 11px;
            background: #facc15;
            color: black;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .boss-hp-bg {
            width: 100%;
            height: 18px;
            background: #330000;
            border: 2px solid #7f1d1d;
            border-radius: 4px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }

        .boss-hp-fill {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, #dc2626, #991b1b);
            transition: width 0.2s ease-out;
            box-shadow: 0 0 10px #dc2626;
        }

        #boss-speech {
            position: absolute;
            background: white;
            color: #1e293b;
            padding: 12px 20px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 15px;
            max-width: 300px;
            text-align: center;
            opacity: 0;
            transition: all 0.3s;
            pointer-events: none;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            border: 3px solid #cbd5e1;
            z-index: 50;
        }

        #boss-speech::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid white;
        }

        #boss-speech.visible {
            opacity: 1;
        }

        #voice-bubble {
            position: absolute;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            padding: 8px 15px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            z-index: 60;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        #voice-bubble.visible {
            opacity: 1;
        }

        .hud-bottom {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            align-items: flex-end;
        }

        .skill-icon {
            width: 58px;
            height: 58px;
            background: rgba(30, 41, 59, 0.95);
            border: 2px solid #475569;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            position: relative;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            transition: all 0.2s;
        }

        .skill-icon.active {
            border-color: #facc15;
            box-shadow: 0 0 20px rgba(250, 204, 21, 0.6);
            transform: scale(1.1);
        }

        #passive-skill {
            border-color: #fbbf24;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.6);
            background: rgba(251, 191, 36, 0.1);
            display: none;
        }

        #passive-skill.unlocked {
            display: flex;
            animation: pulseGold 2s infinite;
        }

        @keyframes pulseGold {

            0%,
            100% {
                box-shadow: 0 0 20px rgba(251, 191, 36, 0.6);
            }

            50% {
                box-shadow: 0 0 30px rgba(251, 191, 36, 1);
            }
        }

        .skill-name {
            position: absolute;
            bottom: -20px;
            font-size: 9px;
            color: #fbbf24;
            font-weight: bold;
            white-space: nowrap;
            text-align: center;
        }

        .cooldown-mask {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            height: 0%;
            border-radius: 10px;
            transition: height 0.1s linear;
        }

        .key-hint {
            position: absolute;
            top: -8px;
            left: -8px;
            background: #3b82f6;
            color: white;
            font-size: 9px;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Overlay / Menu */
        #overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.85);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            z-index: 100;
            pointer-events: auto;
            backdrop-filter: blur(8px);
            overflow-y: auto;
            overflow-x: hidden;
            padding: 12px 0;
        }

        .menu-container {
            background: rgba(15, 23, 42, 0.85);
            border: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            border-radius: 24px;
            padding: 28px 32px;
            max-width: 860px;
            width: 92%;
            display: flex;
            flex-direction: column;
            align-items: center;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            flex-shrink: 0;
        }

        .title {
            font-family: 'Orbitron', sans-serif;
            font-size: 48px;
            font-weight: 900;
            background: linear-gradient(45deg, #3b82f6, #8b5cf6, #facc15);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 6px;
            text-align: center;
            text-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
            letter-spacing: 3px;
        }

        @keyframes glow {

            0%,
            100% {
                filter: drop-shadow(0 0 20px rgba(59, 130, 246, 0.5));
            }

            50% {
                filter: drop-shadow(0 0 30px rgba(139, 92, 246, 0.8));
            }
        }

        .subtitle {
            font-size: 15px;
            color: #94a3b8;
            margin-bottom: 16px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .version-badge {
            background: #8b5cf6;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            margin-left: 10px;
            font-weight: 600;
        }

        #mission-brief {
            margin-bottom: 12px;
            color: #60a5fa;
            font-style: italic;
            font-size: 15px;
            text-align: center;
        }

        .info-section {
            display: flex;
            gap: 16px;
            width: 100%;
            margin-bottom: 16px;
        }

        .new-features {
            flex: 1;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(59, 130, 246, 0.1));
            border: 1px solid rgba(139, 92, 246, 0.3);
            padding: 14px 16px;
            border-radius: 16px;
        }

        .new-features h3 {
            color: #a855f7;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .feature-list {
            display: flex;
            flex-direction: column;
            gap: 6px;
            font-size: 12px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .instructions {
            flex: 1;
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.6), rgba(15, 23, 42, 0.6));
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 14px 16px;
            border-radius: 16px;
            color: #cbd5e1;
            text-align: left;
            font-size: 13px;
            line-height: 1.5;
        }

        #report-card {
            background: rgba(15, 23, 42, 0.85);
            border: 2px solid rgba(239, 68, 68, 0.3);
            padding: 18px 20px;
            border-radius: 16px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            margin-bottom: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            display: none;
            backdrop-filter: blur(8px);
        }

        .report-header {
            font-size: 22px;
            font-weight: 900;
            color: #ef4444;
            margin-bottom: 14px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
        }

        .report-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 14px;
        }

        .stat-item {
            background: rgba(15, 23, 42, 0.5);
            padding: 12px 8px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(4px);
        }

        .stat-label {
            font-size: 11px;
            color: #94a3b8;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .stat-value {
            font-size: 20px;
            font-family: 'Orbitron', sans-serif;
            color: #60a5fa;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(96, 165, 250, 0.3);
        }

        #report-text {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            font-style: italic;
            color: #fbbf24;
            line-height: 1.6;
        }

        .btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            border: none;
            padding: 14px 40px;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
            pointer-events: auto;
            margin: 5px;
            letter-spacing: 1px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            text-transform: uppercase;
        }

        .btn:hover {
            transform: scale(1.05) translateY(-2px);
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            box-shadow: 0 0 40px rgba(59, 130, 246, 0.8);
        }

        #ai-loading {
            font-size: 14px;
            color: #60a5fa;
            margin-top: 15px;
            display: none;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 0.5;
            }

            50% {
                opacity: 1;
            }
        }

        #victory-screen {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.85);
            z-index: 101;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            backdrop-filter: blur(8px);
        }

        #victory-screen .title {
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 0 0 30px rgba(239, 68, 68, 0.5);
        }

        .victory-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
            max-width: 400px;
        }

        .victory-stat-item {
            text-align: center;
            padding: 20px;
            background: rgba(15, 23, 42, 0.85);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            backdrop-filter: blur(4px);
        }

        .victory-stat-label {
            font-size: 12px;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .victory-stat-value {
            font-size: 28px;
            font-family: 'Orbitron', sans-serif;
            color: #60a5fa;
            font-weight: 700;
            text-shadow: 0 0 15px rgba(96, 165, 250, 0.3);
        }

        /* Character Selection */
        .char-select-section {
            width: 100%;
            margin-bottom: 16px;
        }

        .char-select-section h3 {
            color: #60a5fa;
            font-size: 16px;
            text-align: center;
            margin-bottom: 14px;
            letter-spacing: 2px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .char-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 20px;
            justify-content: center;
            max-width: 900px;
            /* widened: 3 cards at ~280px each fit cleanly */
            margin: 0 auto;
        }

        .char-card {
            background: rgba(15, 23, 42, 0.85);
            border: 2px solid #334155;
            border-radius: 16px;
            padding: 16px 14px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            pointer-events: auto;
            backdrop-filter: blur(4px);
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .char-card:hover {
            transform: scale(1.05) translateY(-4px);
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
        }

        .char-card[data-char="kao"]:hover {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
            box-shadow: 0 12px 32px rgba(59, 130, 246, 0.3);
        }

        .char-card[data-char="poom"]:hover {
            border-color: #f59e0b;
            background: rgba(245, 158, 11, 0.1);
            box-shadow: 0 12px 32px rgba(245, 158, 11, 0.3);
        }

        .char-card.selected {
            border-color: #facc15;
            background: rgba(250, 204, 21, 0.08);
            box-shadow: 0 0 25px rgba(250, 204, 21, 0.4);
        }

        .char-card .char-avatar {
            font-size: 36px;
            margin-bottom: 8px;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }

        .char-card .char-name {
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            font-weight: 700;
            color: #e2e8f0;
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .char-card .char-title {
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .char-card[data-char="kao"] .char-title {
            color: #3b82f6;
        }

        .char-card[data-char="poom"] .char-title {
            color: #f59e0b;
        }

        .char-card .char-desc {
            font-size: 11px;
            color: #94a3b8;
            line-height: 1.4;
            margin-bottom: 10px;
            min-height: 28px;
        }

        /* Stat Bars */
        .char-stats {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 8px;
        }

        .stat-bar {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stat-label {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            width: 60px;
            text-align: left;
            color: #64748b;
        }

        .stat-bar-bg {
            flex: 1;
            height: 6px;
            background: rgba(30, 41, 59, 0.8);
            border-radius: 3px;
            overflow: hidden;
        }

        .stat-bar-fill {
            height: 100%;
            transition: width 0.3s ease;
        }

        .char-card[data-char="kao"] .stat-bar-fill {
            background: linear-gradient(90deg, #3b82f6, #2563eb);
            box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
        }

        .char-card[data-char="poom"] .stat-bar-fill {
            background: linear-gradient(90deg, #f59e0b, #d97706);
            box-shadow: 0 0 8px rgba(245, 158, 11, 0.5);
        }

        .char-card .char-tag {
            display: inline-block;
            font-size: 10px;
            font-weight: 700;
            padding: 4px 12px;
            border-radius: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .char-card[data-char="kao"] .char-tag {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid #3b82f6;
            color: #60a5fa;
        }

        .char-card[data-char="poom"] .char-tag {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid #f59e0b;
            color: #fbbf24;
        }

        /* ‚îÄ‚îÄ AUTO ‚Äî Thermodynamic Brawler ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
        .char-card[data-char="auto"]:hover {
            border-color: #dc2626;
            background: rgba(220, 38, 38, 0.10);
            box-shadow: 0 12px 32px rgba(220, 38, 38, 0.35);
        }

        .char-card[data-char="auto"].selected {
            border-color: #fb7185;
            background: rgba(220, 38, 38, 0.12);
            box-shadow: 0 0 28px rgba(220, 38, 38, 0.55);
        }

        .char-card[data-char="auto"] .char-name {
            color: #fecaca;
        }

        .char-card[data-char="auto"] .char-title {
            color: #fb7185;
        }

        .char-card[data-char="auto"] .char-desc {
            color: #fca5a5;
        }

        .char-card[data-char="auto"] .stat-bar-fill {
            background: linear-gradient(90deg, #dc2626, #f97316);
            box-shadow: 0 0 8px rgba(220, 38, 38, 0.55);
        }

        .char-card[data-char="auto"] .char-tag {
            background: rgba(220, 38, 38, 0.20);
            border: 1px solid #dc2626;
            color: #fca5a5;
        }

        .char-card[data-char="auto"] .char-avatar {
            filter: drop-shadow(0 0 12px rgba(220, 38, 38, 0.7));
        }

        @keyframes wanchaiGlow {

            0%,
            100% {
                box-shadow: 0 0 8px rgba(220, 38, 38, 0.45);
            }

            50% {
                box-shadow: 0 0 20px rgba(220, 38, 38, 0.90), 0 0 40px rgba(249, 115, 22, 0.4);
            }
        }

        .char-card[data-char="auto"].selected {
            animation: wanchaiGlow 1.6s ease-in-out infinite;
        }

        #naga-timer {
            position: absolute;
            bottom: 4px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 9px;
            font-weight: bold;
            color: #10b981;
            pointer-events: none;
            display: none;
        }

        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           üéì TUTORIAL OVERLAY
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        #tutorial-overlay {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 19000;
            pointer-events: none;
            /* semi-dark vignette around edges only */
            background: radial-gradient(ellipse at center,
                    rgba(0, 0, 0, 0.0) 30%,
                    rgba(0, 0, 0, 0.55) 100%);
        }

        /* Card positions */
        .tutorial-card {
            position: absolute;
            pointer-events: auto;
            width: min(520px, 92vw);
            background: linear-gradient(160deg, #0f172a 0%, #1e293b 100%);
            border: 2px solid #8b5cf6;
            border-radius: 20px;
            padding: 28px 32px 24px;
            box-shadow:
                0 0 0 1px rgba(139, 92, 246, 0.25),
                0 0 40px rgba(139, 92, 246, 0.35),
                0 24px 60px rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
        }

        .tutorial-card--center {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .tutorial-card--bottom {
            bottom: 130px;
            left: 50%;
            transform: translateX(-50%);
        }

        .tutorial-card--top {
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
        }

        /* Inner layout */
        .tut-header {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 14px;
        }

        #tut-icon {
            font-size: 40px;
            line-height: 1;
            filter: drop-shadow(0 0 10px rgba(139, 92, 246, 0.7));
            flex-shrink: 0;
        }

        #tut-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 17px;
            font-weight: 700;
            color: #c4b5fd;
            letter-spacing: 1px;
            line-height: 1.3;
        }

        #tut-body {
            font-size: 14px;
            color: #cbd5e1;
            line-height: 1.75;
            margin-bottom: 20px;
        }

        /* Action progress bar */
        #tut-action-hint {
            display: none;
            align-items: center;
            gap: 10px;
            margin-bottom: 14px;
            font-size: 12px;
            color: #94a3b8;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        #tut-action-hint::before {
            content: '‚ñ∂';
            color: #8b5cf6;
        }

        #tut-action-bar {
            display: none;
            height: 8px;
            background: rgba(30, 41, 59, 0.9);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 18px;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        #tut-action-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #8b5cf6, #a855f7);
            box-shadow: 0 0 8px #8b5cf6;
            transition: width 0.2s ease-out;
            border-radius: 4px;
        }

        #tut-action-label {
            font-size: 11px;
            color: #a78bfa;
            text-align: right;
            margin-top: -14px;
            margin-bottom: 14px;
            font-family: 'Orbitron', sans-serif;
        }

        /* Buttons row */
        .tut-btn-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }

        #tut-next-btn {
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
            color: white;
            border: none;
            padding: 11px 32px;
            font-size: 15px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            border-radius: 10px;
            cursor: pointer;
            letter-spacing: 1px;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
            transition: all 0.18s;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        #tut-next-btn:hover {
            transform: scale(1.05) translateY(-1px);
            box-shadow: 0 0 32px rgba(139, 92, 246, 0.8);
        }

        #tut-skip-btn {
            background: transparent;
            color: #475569;
            border: 1px solid #334155;
            padding: 9px 18px;
            font-size: 12px;
            border-radius: 8px;
            cursor: pointer;
            letter-spacing: 1px;
            transition: all 0.15s;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        #tut-skip-btn:hover {
            color: #94a3b8;
            border-color: #475569;
        }

        /* Progress dots */
        #tutorial-progress {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        .tut-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background: #1e293b;
            border: 1.5px solid #334155;
            transition: all 0.2s;
        }

        .tut-dot--active {
            background: #8b5cf6;
            border-color: #8b5cf6;
            box-shadow: 0 0 6px #8b5cf6;
            transform: scale(1.3);
        }

        .tut-dot--done {
            background: #4c1d95;
            border-color: #6d28d9;
        }

        /* Spotlight pulse ring ‚Äî drawn around highlighted elements */
        @keyframes tutSpotlight {

            0%,
            100% {
                box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.5), 0 0 20px rgba(139, 92, 246, 0.3);
            }

            50% {
                box-shadow: 0 0 0 8px rgba(139, 92, 246, 0.8), 0 0 40px rgba(139, 92, 246, 0.6);
            }
        }

        @media (max-width: 768px) {
            .title {
                font-size: 28px;
            }

            .subtitle {
                font-size: 13px;
                margin-bottom: 10px;
            }

            #mission-brief {
                font-size: 13px;
                margin-bottom: 8px;
            }

            .info-section {
                flex-direction: column;
                gap: 10px;
                margin-bottom: 10px;
            }

            .weapon-indicator {
                font-size: 14px;
                padding: 8px 16px;
            }

            .report-stats {
                grid-template-columns: 1fr;
            }

            .char-cards {
                grid-template-columns: 1fr !important;
                align-items: center;
            }

            .char-card {
                padding: 12px 10px;
            }

            .char-card .char-avatar {
                font-size: 28px;
                margin-bottom: 6px;
            }

            .char-card .char-name {
                font-size: 12px;
            }

            .char-card .char-desc {
                min-height: 0;
            }

            .char-select-section {
                margin-bottom: 10px;
            }

            .char-select-section h3 {
                font-size: 13px;
                margin-bottom: 10px;
            }

            .menu-container {
                padding: 16px 14px;
            }

            .resume-prompt-inner {
                padding: 32px 28px;
            }

            .resume-title {
                font-size: 20px;
            }

            .console-inner {
                max-height: 92vh;
            }

            .btn {
                padding: 12px 28px;
                font-size: 14px;
            }

            .new-features h3 {
                font-size: 12px;
            }

            .feature-list {
                font-size: 11px;
                gap: 4px;
            }

            .instructions {
                font-size: 11px;
            }

            #report-card {
                padding: 14px 12px;
            }

            .report-header {
                font-size: 18px;
                margin-bottom: 10px;
            }

            .stat-value {
                font-size: 16px;
            }
        }

        @media (max-height: 700px) {
            .menu-container {
                padding: 16px 24px;
            }

            .title {
                font-size: 36px;
            }

            .subtitle {
                margin-bottom: 8px;
            }

            #mission-brief {
                margin-bottom: 8px;
            }

            .char-select-section {
                margin-bottom: 10px;
            }

            .char-select-section h3 {
                margin-bottom: 8px;
            }

            .char-card {
                padding: 10px 12px;
            }

            .char-card .char-avatar {
                font-size: 28px;
                margin-bottom: 4px;
            }

            .char-stats {
                gap: 4px;
                margin-bottom: 6px;
            }

            .char-card .char-desc {
                min-height: 0;
                margin-bottom: 6px;
            }

            .info-section {
                margin-bottom: 10px;
            }

            .new-features,
            .instructions {
                padding: 10px 12px;
            }

            .btn {
                padding: 10px 32px;
            }
        }

        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           MOBILE UI
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        #mobile-ui {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9999;
            pointer-events: none;
        }

        /* ‚îÄ‚îÄ Show controls on touch devices (Mobile / iPad) ‚îÄ‚îÄ */
        @media (hover: none) and (pointer: coarse) {
            #mobile-ui {
                display: block;
            }

            #gameCanvas {
                width: 100vw !important;
                height: 100vh !important;
                border: none;
                border-radius: 0;
            }
        }

        .joystick-zone {
            position: absolute;
            width: 45vw;
            height: 65vh;
            bottom: 0;
            pointer-events: auto;
            touch-action: none;
        }

        .joystick-zone.left {
            left: 0;
        }

        .joystick-zone.right {
            right: 0;
        }

        .joystick-base {
            position: absolute;
            width: 120px;
            height: 120px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.14);
            border-radius: 50%;
            display: none;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }

        .joystick-stick {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 52px;
            height: 52px;
            border-radius: 50%;
            background: rgba(59, 130, 246, 0.5);
            pointer-events: none;
        }

        .joystick-zone.right .joystick-stick {
            background: rgba(239, 68, 68, 0.5);
        }

        .action-btn {
            position: absolute;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: rgba(15, 23, 42, 0.75);
            border: 2px solid rgba(255, 255, 255, 0.12);
            color: white;
            font-size: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: auto;
            touch-action: none;
            z-index: 10000;
        }

        #btn-dash {
            right: 18px;
            bottom: 200px;
        }

        #btn-skill {
            right: 86px;
            bottom: 150px;
        }

        #btn-switch {
            right: 142px;
            bottom: 92px;
        }

        #btn-database {
            left: 18px;
            bottom: 200px;
            border-color: #06b6d4;
            background: rgba(6, 182, 212, 0.2);
            display: none;
        }

        #btn-shop {
            left: 18px;
            bottom: 270px;
            border-color: #facc15;
            background: rgba(250, 204, 21, 0.15);
            display: none;
        }

        /* ‚îÄ‚îÄ Admin Console mobile button ‚îÄ‚îÄ */
        #btn-terminal {
            left: 86px;
            bottom: 200px;
            border-color: #00ff41;
            background: rgba(0, 255, 65, 0.12);
            display: none;
            font-size: 18px;
        }
    </style>
</head>

<body>
    <canvas id="gameCanvas"></canvas>

    <div id="boss-speech"></div>
    <div id="voice-bubble"></div>
    <div id="achievements"></div>

    <!-- Database proximity prompt -->
    <div id="db-prompt">üóÑÔ∏è ‡∏Å‡∏î <kbd
            style="background:#06b6d4;color:#000;padding:1px 6px;border-radius:4px;font-family:monospace;font-weight:bold;">E</kbd>
        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î MTC DATABASE</div>

    <!-- Admin Console proximity prompt -->
    <div id="console-prompt">üíª ‡∏Å‡∏î <kbd
            style="background:#00ff41;color:#000;padding:1px 6px;border-radius:4px;font-family:'Courier New',monospace;font-weight:bold;">F</kbd>
        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î ADMIN TERMINAL</div>

    <!-- Shop proximity prompt -->
    <div id="shop-prompt">üõí ‡∏Å‡∏î <kbd
            style="background:#facc15;color:#000;padding:1px 6px;border-radius:4px;font-family:monospace;font-weight:bold;">B</kbd>
        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î MTC CO-OP STORE</div>

    <!-- Pause indicator strip (top-center) -->
    <div id="pause-indicator">‚è∏ PAUSED ‚Äî DATABASE</div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         RESUME PROMPT (DB / window blur pause)
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="resume-prompt" onclick="resumeGame()">
        <div class="resume-prompt-inner">
            <div class="resume-icon">‚è∏</div>
            <div class="resume-title">GAME PAUSED</div>
            <div class="resume-sub">
                MTC Database ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß<br>
                ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏° ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î Resume
            </div>
            <button class="resume-btn" onclick="event.stopPropagation(); resumeGame()">‚ñ∂ RESUME GAME</button>
            <div class="resume-hint">‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏î‡∏Å‡πá‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠</div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üíª ADMIN CONSOLE OVERLAY
         Opens when player presses T near the server.
         Game is paused while console is open.
         Closed via √ó button, Escape, or 'exit' command.
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="admin-console">
        <div class="console-inner" id="console-inner">

            <!-- Title bar -->
            <div class="console-titlebar">
                <div class="console-titlebar-left">
                    <div class="console-dot dot-red"></div>
                    <div class="console-dot dot-amber"></div>
                    <div class="console-dot dot-green"></div>
                    <span class="console-title-text">MTC ADMIN TERMINAL v2.4.1 ‚Äî ROOT@MTCSERVER</span>
                </div>
                <button class="console-close-btn" onclick="closeAdminConsole()"
                    ontouchstart="event.preventDefault(); closeAdminConsole();">
                    [ESC]
                </button>
            </div>

            <!-- Boot lines -->
            <div class="console-boot">
                <div class="console-boot-line dim">MTC KERNEL 6.1.0-mtc-amd64 #1 SMP PREEMPT_DYNAMIC</div>
                <div class="console-boot-line dim">Initialising MTC Server Node... <span style="color:#00ff41;">[ OK
                        ]</span></div>
                <div class="console-boot-line highlight">WARNING: Unauthorised access is prohibited by MTC Policy ¬ß4.2
                </div>
                <div class="console-boot-line">Type <span style="color:#00ff41;">help</span> for available commands.
                    Type <span style="color:#00ff41;">exit</span> to quit.</div>
            </div>
            <hr class="console-divider">

            <!-- Scrollable output log -->
            <div id="console-output">
                <!-- Lines injected by JS -->
            </div>

            <!-- Input row -->
            <div class="console-input-row">
                <span class="console-prompt-symbol">root@mtcserver:~#&nbsp;</span>
                <input type="text" id="console-input" placeholder="type command..." autocomplete="off" autocorrect="off"
                    autocapitalize="off" spellcheck="false" />
                <div class="console-cursor"></div>
            </div>

            <!-- Command reference -->
            <div class="console-help">
                <span class="help-cmd"><span>sudo heal</span> ‚Äî ‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π HP 100</span>
                <span class="help-cmd"><span>sudo score</span> ‚Äî +5000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</span>
                <span class="help-cmd"><span>sudo next</span> ‚Äî ‡∏Ç‡πâ‡∏≤‡∏°‡πÄ‡∏ß‡∏ü‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</span>
                <span class="help-cmd"><span>help</span> ‚Äî ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á</span>
                <span class="help-cmd"><span>exit</span> ‚Äî ‡∏õ‡∏¥‡∏î Terminal</span>
            </div>

        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üõí SHOP MODAL
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="shop-modal">
        <div class="shop-inner">
            <div class="shop-header">
                <div class="shop-title">
                    <span class="shop-title-icon">üõí</span>
                    MTC CO-OP STORE
                </div>
                <div class="shop-score-info">
                    <span>üí∞ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô:</span>
                    <span class="shop-score-value" id="shop-score-display">0</span>
                </div>
                <button class="shop-close-btn" onclick="closeShop()" ontouchstart="event.preventDefault(); closeShop();"
                    title="‡∏õ‡∏¥‡∏î‡∏£‡πâ‡∏≤‡∏ô (Escape)">‚úï</button>
            </div>
            <div class="shop-subtitle">‚ú¶ ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏≠‡πÄ‡∏ó‡∏° ‚Äî ‡∏Å‡∏î Escape ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏Å ‚ú¶</div>
            <div id="shop-items"></div>
            <div class="shop-footer">
                ‚ö†Ô∏è ‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡∏à‡∏∞‡∏´‡∏°‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ &nbsp;|&nbsp; ‡∏ã‡∏∑‡πâ‡∏≠‡∏ã‡πâ‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡πà‡∏≠‡πÄ‡∏ß‡∏•‡∏≤
            </div>
        </div>
    </div>

    <div class="weapon-indicator">
        <div class="weapon-name" id="weapon-name">AUTO RIFLE</div>
        <div class="weapon-hint">‡∏Å‡∏î Q ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏•‡∏±‡∏ö‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò</div>
    </div>

    <!-- Mobile UI -->
    <div id="mobile-ui">
        <div id="joystick-left-zone" class="joystick-zone left">
            <div id="joystick-left-base" class="joystick-base">
                <div id="joystick-left-stick" class="joystick-stick"></div>
            </div>
        </div>
        <div id="joystick-right-zone" class="joystick-zone right">
            <div id="joystick-right-base" class="joystick-base">
                <div id="joystick-right-stick" class="joystick-stick"></div>
            </div>
        </div>

        <button id="btn-switch" class="action-btn">üîÑ</button>
        <button id="btn-skill" class="action-btn">üìñ</button>
        <button id="btn-dash" class="action-btn">üí®</button>
        <button id="btn-naga" class="action-btn"
            style="display:none; right:18px; bottom:270px; border-color:#10b981; background:rgba(16,185,129,0.2);">üêâ</button>
        <!-- MTC Database -->
        <button id="btn-database" class="action-btn">üìö</button>
        <!-- Admin Terminal -->
        <button id="btn-terminal" class="action-btn">üíª</button>
        <!-- MTC Shop -->
        <button id="btn-shop" class="action-btn">üõí</button>
    </div>

    <!-- HUD Layer -->
    <div id="ui-layer">
        <div class="hud-top">
            <div class="player-card">
                <div style="font-size:20px" id="player-avatar">üë®üèª‚Äçüéì</div>
                <div class="status-bars">
                    <div class="bar-wrap">
                        <div id="hp-bar" class="bar-fill hp-fill" style="width:100%;"></div>
                    </div>
                    <div class="bar-wrap">
                        <div id="en-bar" class="bar-fill en-fill" style="width:100%;"></div>
                    </div>
                    <div style="font-size:11px; color:#94a3b8;">HP & FOCUS</div>
                    <div class="level-info">
                        <div class="level-display">
                            <span id="player-level">Lv.1</span>
                            <div class="exp-bar-bg">
                                <div id="exp-bar"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="stats-box">
                <div class="score-num" id="score">0</div>
                <div style="color:#94a3b8; font-size:12px;">SCORE</div>
                <div class="wave-badge" id="wave-badge">WAVE 1</div>
            </div>
        </div>

        <div id="boss-hud">
            <div class="boss-name" id="boss-name">
                KRU MANOP <span class="ai-badge">AI</span>
            </div>
            <div class="boss-hp-bg">
                <div id="boss-hp-bar" class="boss-hp-fill"></div>
            </div>
        </div>

        <div class="hud-bottom">
            <div class="skill-icon">
                <div class="key-hint">L-Click</div>‚öîÔ∏è
            </div>
            <div class="skill-icon" id="dash-icon">
                <div class="key-hint">SPACE</div>üí®
                <div class="cooldown-mask" id="dash-cd"></div>
            </div>
            <div class="skill-icon" id="stealth-icon">
                <div class="key-hint" id="skill1-hint">R-Click</div>
                <span id="skill1-emoji">üìñ</span>
                <div class="cooldown-mask" id="stealth-cd"></div>
            </div>
            <div class="skill-icon" id="naga-icon"
                style="display:none; border-color:#10b981; box-shadow:0 0 15px rgba(16,185,129,0.4);">
                <div class="key-hint" style="background:#10b981;">Q</div>üêâ
                <div class="cooldown-mask" id="naga-cd"></div>
                <span id="naga-timer"></span>
            </div>
            <!-- Ritual Burst slot ‚Äî Poom-exclusive, shown by setupCharacterHUD -->
            <div class="skill-icon" id="ritual-icon"
                style="display:none; border-color:#00ff88; box-shadow:0 0 15px rgba(0,255,136,0.4);">
                <div class="key-hint" style="background:#00ff88;color:#0a1a0f;">R</div>üåæ
                <div class="cooldown-mask" id="ritual-cd"></div>
                <span id="ritual-timer"></span>
            </div>
            <div class="skill-icon" id="passive-skill">
                <div style="font-size:20px;">‚ú®</div>
                <div class="skill-name">‡∏ã‡∏∏‡πà‡∏°‡πÄ‡∏™‡∏£‡∏µ</div>
            </div>
            <!-- Database shortcut icon -->
            <div class="skill-icon" id="db-hud-icon"
                style="display:none; border-color:#06b6d4; box-shadow:0 0 15px rgba(6,182,212,0.35);">
                <div class="key-hint" style="background:#06b6d4;color:#0c1a2e;">E</div>üóÑÔ∏è
                <div class="skill-name" style="color:#67e8f9;">DATABASE</div>
            </div>
            <!-- Admin Console shortcut icon -->
            <div class="skill-icon" id="console-hud-icon"
                style="display:none; border-color:#00ff41; box-shadow:0 0 15px rgba(0,255,65,0.35);">
                <div class="key-hint" style="background:#00ff41;color:#001a08;">F</div>üíª
                <div class="skill-name" style="color:#00ff41;">TERMINAL</div>
            </div>
            <!-- Shop shortcut icon -->
            <div class="skill-icon" id="shop-hud-icon"
                style="display:none; border-color:#facc15; box-shadow:0 0 15px rgba(250,204,21,0.35);">
                <div class="key-hint" style="background:#facc15;color:#0f172a;">B</div>üõí
                <div class="skill-name" style="color:#fef08a;">SHOP</div>
            </div>
        </div>
    </div>

    <!-- Menu Overlay -->
    <div id="overlay">
        <div class="menu-container">
            <div class="title">
                MTC the Game
            </div>
            <div class="subtitle">BETA EDITION <span class="version-badge">v.1.0</span></div>

            <div id="mission-brief">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à...</div>

            <!-- Character Selection -->
            <div class="char-select-section">
                <h3>SELECT YOUR OPERATOR</h3>
                <div class="char-cards">
                    <div class="char-card selected" id="card-kao" data-char="kao" onclick="selectCharacter('kao')">
                        <div class="char-avatar">üë®üèª‚Äçüéì</div>
                        <div class="char-name">KAO</div>
                        <div class="char-title">Tactical Ranged</div>
                        <div class="char-stats">
                            <div class="stat-bar">
                                <div class="stat-label">HP</div>
                                <div class="stat-bar-bg">
                                    <div class="stat-bar-fill" style="width: 54.1%;"></div>
                                </div>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-label">Damage</div>
                                <div class="stat-bar-bg">
                                    <div class="stat-bar-fill" style="width: 100%;"></div>
                                </div>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-label">Speed</div>
                                <div class="stat-bar-bg">
                                    <div class="stat-bar-fill" style="width: 100%;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="char-desc">Stealth specialist with advanced tactical abilities</div>
                        <div class="char-tag">Stealth Ops</div>
                    </div>
                    <div class="char-card" id="card-poom" data-char="poom" onclick="selectCharacter('poom')">
                        <div class="char-avatar">üåæ</div>
                        <div class="char-name">POOM</div>
                        <div class="char-title">Naga Summoner</div>
                        <div class="char-stats">
                            <div class="stat-bar">
                                <div class="stat-label">HP</div>
                                <div class="stat-bar-bg">
                                    <div class="stat-bar-fill" style="width: 65.5%;"></div>
                                </div>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-label">Damage</div>
                                <div class="stat-bar-bg">
                                    <div class="stat-bar-fill" style="width: 85.6%;"></div>
                                </div>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-label">Speed</div>
                                <div class="stat-bar-bg">
                                    <div class="stat-bar-fill" style="width: 100%;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="char-desc">Mystical warrior with ancient naga summoning powers</div>
                        <div class="char-tag">Mystic Force</div>
                    </div>
                    <div class="char-card" id="btn-auto" data-char="auto" onclick="selectCharacter('auto')">
                        <div class="char-avatar">üî•</div>
                        <div class="char-name">AUTO</div>
                        <div class="char-title">Thermodynamic Brawler</div>
                        <div class="char-stats">
                            <div class="stat-bar">
                                <div class="stat-label">HP</div>
                                <div class="stat-bar-bg">
                                    <div class="stat-bar-fill" style="width: 100%;"></div>
                                </div>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-label">Damage</div>
                                <div class="stat-bar-bg">
                                    <div class="stat-bar-fill" style="width: 81.6%;"></div>
                                </div>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-label">Speed</div>
                                <div class="stat-bar-bg">
                                    <div class="stat-bar-fill" style="width: 83.9%;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="char-desc">Close-range powerhouse ‚Äî Heat Waves + Stand "Wanchai"</div>
                        <div class="char-tag">Horsepower</div>
                    </div>
                </div>
            </div>

            <script>
                let _selectedChar = 'kao';
                function selectCharacter(charType) {
                    _selectedChar = charType;
                    document.querySelectorAll('.char-card').forEach(c => c.classList.remove('selected'));
                    const card = document.getElementById('card-' + charType) || document.getElementById('btn-' + charType) || document.getElementById(charType);
                    if (card) card.classList.add('selected');

                    // ‚îÄ‚îÄ Start button label ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                    const startBtn = document.getElementById('start-btn');
                    if (startBtn) {
                        startBtn.textContent = charType === 'poom'
                            ? 'üåæ START MISSION'
                            : (charType === 'auto' ? 'üî• START MISSION' : 'üéì START MISSION');
                    }

                    // ‚îÄ‚îÄ HUD avatar preview ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                    // Updates the tiny avatar icon at top-left to preview
                    // the selected character before the game starts.
                    const avatarEl = document.getElementById('player-avatar');
                    if (avatarEl) {
                        avatarEl.textContent = charType === 'poom' ? 'üåæ'
                            : charType === 'auto' ? 'üî•'
                                : 'üë®üèª‚Äçüéì';
                    }

                    // ‚îÄ‚îÄ Skill slot hint preview ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                    // Swaps the R-Click label so the user knows what the
                    // secondary skill does before they start.
                    const hintEl = document.getElementById('skill1-hint');
                    if (hintEl) {
                        hintEl.textContent = charType === 'auto' ? 'STAND'
                            : charType === 'poom' ? 'EAT'
                                : 'R-Click';
                    }
                    const emojiEl = document.getElementById('skill1-emoji');
                    if (emojiEl) {
                        emojiEl.textContent = charType === 'auto' ? 'üî•'
                            : charType === 'poom' ? 'üçö'
                                : 'üìñ';
                    }
                }
            </script>

            <div id="report-card">
                <div class="report-header">MISSION FAILED</div>
                <div class="report-stats">
                    <div class="stat-item">
                        <div class="stat-label">Score</div>
                        <div class="stat-value" id="report-score">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Wave</div>
                        <div class="stat-value" id="report-wave">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Kills</div>
                        <div class="stat-value" id="report-kills">0</div>
                    </div>
                </div>
                <div id="report-text">Awaiting performance evaluation...</div>
            </div>

            <div class="info-section">
                <div class="new-features">
                    <h3>‚ú¶ BETA EDITION ‚Äî WHAT'S NEW?</h3>
                    <div class="feature-list">
                        <div class="feature-item">üí• <strong>Interactive Environments</strong> ‚Äî Shoot explosive barrels
                            for massive AoE damage!</div>
                        <div class="feature-item">üå´Ô∏è <strong>Dynamic Waves</strong> ‚Äî Survive blinding Fog Waves &amp;
                            hyper-fast Speed Waves.</div>
                        <div class="feature-item">üõí <strong>Co-op Store Progression</strong> ‚Äî Stack buffs up to 1.5√ó
                            (duration decay at max stacks).</div>
                        <div class="feature-item">üß≠ <strong>Tactical Navigation</strong> ‚Äî Low-HP floor guide leads you
                            to the MTC Room or Shop.</div>
                        <div class="feature-item">üçö <strong>MTC Stand Power</strong> ‚Äî Unleash "Wanchai" &amp; summon
                            Naga with Poom's unique kit.</div>
                        <div class="feature-item">üéØ <strong>Radar Blackout</strong> ‚Äî Fog Waves disable your minimap.
                            Navigate by instinct!</div>
                    </div>
                </div>
                <div class="instructions">
                    <p style="color:#fff; margin-bottom:15px; font-weight:600;"><strong>MISSION BRIEFING</strong></p>
                    <div style="display:grid; grid-template-columns:repeat(2,1fr); gap:12px; margin-bottom:15px;">
                        <div>[ W A S D ] Movement</div>
                        <div>[ L-Click ] Fire Weapon</div>
                        <div>[ R-Click ] Tactical Skill</div>
                        <div>[ SPACE ] Dash Evade</div>
                        <div>[ Q ] Switch Weapon</div>
                        <div>[ B ] Open Shop</div>
                        <div>[ T ] Bullet Time</div>
                        <div>[ E ] Database Access</div>
                    </div>
                    <p style="font-size:13px; color:#facc15; font-weight:500;">üí° Tactical Tip : Enter MTC Room for
                        health recovery | Access Server for Database &amp; Admin Console</p>
                </div>
            </div>

            <!-- ‚ïê‚ïê DEV MODE PANEL (hidden by default, unlocked via secret keylogger) ‚ïê‚ïê -->
            <div id="dev-mode-panel"
                style="display:none; width:100%; margin-bottom:15px; background:rgba(220,38,38,0.15); border:1px solid #ef4444; border-radius:12px; padding:14px; text-align:center;">
                <div style="color:#fca5a5; font-weight:bold; font-size:14px; margin-bottom:10px; letter-spacing:2px;">‚ö†Ô∏è
                    DEVELOPER MODE UNLOCKED</div>
                <label
                    style="display:flex; align-items:center; justify-content:center; gap:8px; cursor:pointer; color:#f87171; font-size:13px; user-select:none;">
                    <input type="checkbox" id="dev-kao-passive-toggle" checked
                        style="width:16px; height:16px; accent-color:#ef4444;">
                    [‡πÄ‡∏Å‡πâ‡∏≤] ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô <strong style="color:#fca5a5;">'‡∏ã‡∏∏‡πà‡∏°‡πÄ‡∏™‡∏£‡∏µ'</strong> ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏ô‡πÄ‡∏Å‡∏°
                </label>
                <div style="margin-top:8px; color:#94a3b8; font-size:11px; font-style:italic;">‚ö°
                    ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏£‡∏¥‡∏á</div>
            </div>

            <button class="btn" id="start-btn" onclick="startGame(_selectedChar)"
                ontouchstart="event.preventDefault(); startGame(_selectedChar);"
                style="-webkit-tap-highlight-color: transparent; touch-action: manipulation; cursor: pointer;">START
                MISSION</button>
            <div id="ai-loading">Initializing systems...</div>
        </div>
    </div>

    <div id="victory-screen">
        <div class="title">MISSION COMPLETE</div>
        <div class="victory-stats">
            <div class="victory-stat-item">
                <div class="victory-stat-label">Final Score</div>
                <div class="victory-stat-value" id="final-score">0</div>
            </div>
            <div class="victory-stat-item">
                <div class="victory-stat-label">Waves Cleared</div>
                <div class="victory-stat-value" id="final-wave">0</div>
            </div>
            <div class="victory-stat-item">
                <div class="victory-stat-label">Total Kills</div>
                <div class="victory-stat-value" id="final-kills">0</div>
            </div>
        </div>
        <button class="btn" onclick="location.reload()">PLAY AGAIN</button>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üéì TUTORIAL OVERLAY
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="tutorial-overlay">
        <div class="tutorial-card tutorial-card--center" id="tutorial-card">

            <!-- Header: icon + title -->
            <div class="tut-header">
                <div id="tut-icon">üéì</div>
                <div id="tut-title">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö!</div>
            </div>

            <!-- Body text -->
            <div id="tut-body">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>

            <!-- Action hint label -->
            <div id="tut-action-hint">‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏ï‡πà‡∏≠</div>

            <!-- Action progress bar -->
            <div id="tut-action-bar">
                <div id="tut-action-fill"></div>
            </div>
            <div id="tut-action-label"></div>

            <!-- Buttons row -->
            <div class="tut-btn-row">
                <div id="tutorial-progress"></div>
                <div style="display:flex; gap:10px; align-items:center;">
                    <button id="tut-skip-btn" onclick="TutorialSystem.skip()"
                        ontouchstart="event.preventDefault(); TutorialSystem.skip();">
                        SKIP
                    </button>
                    <button id="tut-next-btn" onclick="TutorialSystem.next()"
                        ontouchstart="event.preventDefault(); TutorialSystem.next();">
                        NEXT ‚ñ∂
                    </button>
                </div>
            </div>

        </div>
    </div>

    <script src="js/secrets.js"></script>
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/effects.js"></script>
    <script src="js/weapons.js"></script>
    <script src="js/map.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/tutorial.js"></script>

    <!-- <script src="js/ai.js"></script> -->

    <script src="js/entities/base.js"></script>

    <!-- NEW OOP PLAYER HIERARCHY -->
    <script src="js/entities/player/PlayerBase.js"></script>
    <script src="js/entities/player/Kaoplayer.js"></script>
    <script src="js/entities/player/AutoPlayer.js"></script>
    <script src="js/entities/player/PoomPlayer.js"></script>
    <script src="js/entities/summons.js"></script>
    <script src="js/entities/enemy.js"></script>
    <script src="js/entities/boss_attacks.js"></script>
    <script src="js/entities/boss.js"></script>

    <script src="js/input.js"></script>

    <!-- Extracted Systems -->
    <script src="js/systems/AdminSystem.js"></script>
    <script src="js/systems/ShopSystem.js"></script>
    <script src="js/systems/TimeManager.js"></script>
    <script src="js/systems/WaveManager.js"></script>

    <script src="js/game.js"></script>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('‚úÖ ServiceWorker registered with scope:', registration.scope);
                    })
                    .catch(error => {
                        console.error('‚ùå ServiceWorker registration failed:', error);
                    });
            });
        }
    </script>

</body>

</html>