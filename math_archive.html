<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Math Explorer Pro ‚ú®</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script>window.MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']]},options:{skipHtmlTags:['script','noscript','style','textarea','pre']},startup:{typeset:false}};</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked@4/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
*{box-sizing:border-box}
body{font-family:'Noto Sans Thai',sans-serif;background:#fafaf9;color:#1c1917;-webkit-font-smoothing:antialiased}
.hero-bg{background:linear-gradient(135deg,#1c1917 0%,#292524 40%,#1c1917 100%);position:relative;overflow:hidden}
.hero-bg::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 30% 50%,rgba(245,158,11,.18) 0%,transparent 70%),radial-gradient(ellipse at 80% 20%,rgba(251,191,36,.1) 0%,transparent 60%)}
.hero-grid{position:absolute;inset:0;background-image:linear-gradient(rgba(245,158,11,.06) 1px,transparent 1px),linear-gradient(90deg,rgba(245,158,11,.06) 1px,transparent 1px);background-size:40px 40px}
.float-s{position:absolute;font-size:2rem;opacity:.06;color:#f59e0b;animation:floatS 8s ease-in-out infinite;font-family:serif}
@keyframes floatS{0%,100%{transform:translateY(0) rotate(0deg)}50%{transform:translateY(-20px) rotate(10deg)}}
.sym-card{background:white;border:1px solid #e7e5e4;border-radius:16px;transition:all .25s cubic-bezier(.4,0,.2,1);cursor:pointer;position:relative;overflow:hidden}
.sym-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#f59e0b,#fb923c);transform:scaleX(0);transform-origin:left;transition:transform .3s ease}
.sym-card:hover{transform:translateY(-5px);box-shadow:0 16px 32px -8px rgba(0,0,0,.12),0 4px 8px -4px rgba(245,158,11,.15);border-color:#fde68a}
.sym-card:hover::before{transform:scaleX(1)}
.quiz-on .quiz-hide{filter:blur(10px);opacity:.15;transition:all .3s;user-select:none;pointer-events:none}
.quiz-on .sym-card:hover .quiz-hide{filter:none;opacity:1;pointer-events:auto}
#modal-overlay{transition:opacity .25s ease;backdrop-filter:blur(8px)}
#modal-box{transition:all .3s cubic-bezier(.34,1.56,.64,1)}
.m-hide{opacity:0;pointer-events:none}
.m-hide #modal-box{transform:scale(.88) translateY(20px);opacity:0}
.m-show{opacity:1;pointer-events:all}
.m-show #modal-box{transform:scale(1) translateY(0);opacity:1}
.ai-body h1,.ai-body h2,.ai-body h3{color:#92400e;font-weight:700;margin:.8em 0 .4em}
.ai-body h2{font-size:1.05em}.ai-body h3{font-size:.95em;border-bottom:1px solid #fde68a;padding-bottom:3px}
.ai-body p{margin-bottom:.65em;line-height:1.75}
.ai-body ul,.ai-body ol{margin-left:1.4em;margin-bottom:.65em}
.ai-body li{margin-bottom:.3em;line-height:1.7}
.ai-body strong{color:#b45309;font-weight:700}
.ai-body em{color:#57534e;font-style:italic}
.ai-body code{background:#f5f5f4;color:#e11d48;padding:.1em .35em;border-radius:4px;font-size:.82em}
.ai-body pre{background:#1c1917;color:#fafaf9;padding:1em;border-radius:10px;overflow-x:auto;margin-bottom:.65em}
.ai-body blockquote{border-left:3px solid #f59e0b;padding-left:.9em;color:#78716c;font-style:italic;margin:.65em 0}
.ai-body table{width:100%;border-collapse:collapse;margin-bottom:.65em;font-size:.85em}
.ai-body th{background:#fef3c7;padding:.4em .6em;border:1px solid #fde68a;font-weight:700}
.ai-body td{padding:.35em .6em;border:1px solid #e7e5e4}
.cat-pill{padding:6px 14px;border-radius:999px;font-size:11px;font-weight:700;border:1.5px solid #e7e5e4;cursor:pointer;transition:all .2s;white-space:nowrap;background:white;color:#57534e}
.cat-pill:hover{border-color:#f59e0b;color:#b45309;background:#fffbeb}
.cat-pill.active{background:#f59e0b;color:white;border-color:#d97706;box-shadow:0 3px 8px rgba(245,158,11,.35)}
.mode-btn{display:flex;flex-direction:column;align-items:center;gap:4px;padding:10px 8px;border-radius:12px;font-size:11px;font-weight:700;border:1.5px solid;transition:all .2s;cursor:pointer}
.mode-btn:hover{transform:translateY(-2px)}.mode-btn:active{transform:scale(.96)}
.spinner{width:36px;height:36px;border:3px solid #fde68a;border-top-color:#f59e0b;border-radius:50%;animation:spin .7s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.dots::after{content:'.';animation:dotA 1.4s infinite}
@keyframes dotA{0%,100%{content:'.'}33%{content:'..'}66%{content:'...'}}
::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:#f5f5f4}::-webkit-scrollbar-thumb{background:#d6d3d1;border-radius:3px}
#search-box:focus{border-color:#f59e0b;box-shadow:0 0 0 3px rgba(245,158,11,.15);outline:none}
#roadmap-section{transition:all .4s ease;max-height:0;overflow:hidden;opacity:0}
#roadmap-section.open{max-height:2000px;opacity:1}
mjx-container{font-size:108%!important}
</style>
</head>
<body class="min-h-screen flex flex-col">

<!-- HEADER -->
<header class="bg-white/95 backdrop-blur-md border-b border-stone-200 sticky top-0 z-40 shadow-sm">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 py-3 flex items-center justify-between gap-4">
    <div class="flex items-center gap-3 cursor-pointer select-none" onclick="scrollTo({top:0,behavior:'smooth'})">
      <div class="w-9 h-9 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl flex items-center justify-center shadow-md">
        <span class="text-white font-bold text-lg">‚àë</span>
      </div>
      <div>
        <div class="font-extrabold text-stone-900 leading-none text-base tracking-tight">Math Explorer Pro</div>
        <div class="text-[9px] uppercase tracking-widest text-amber-500 font-bold mt-0.5">AI Powered ¬∑ ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢</div>
      </div>
    </div>
    <div class="flex items-center gap-2">
      <span class="hidden sm:flex items-center gap-1 text-[10px] font-bold text-stone-500 bg-stone-100 px-2.5 py-1 rounded-full border border-stone-200">
        üì¶ <span id="count-num">0</span> ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå
      </span>
      <button id="quiz-btn" onclick="toggleQuiz()" class="flex items-center gap-1.5 px-3 py-2 rounded-xl text-xs font-bold border border-stone-200 bg-stone-50 text-stone-600 hover:bg-stone-100 transition-all active:scale-95 select-none">
        <span id="quiz-icon">üëÅÔ∏è</span><span id="quiz-label" class="hidden sm:inline">‡πÇ‡∏´‡∏°‡∏î‡∏ó‡πà‡∏≠‡∏á‡∏à‡∏≥</span>
      </button>
    </div>
  </div>
</header>

<!-- HERO -->
<section class="hero-bg py-12 sm:py-16 relative">
  <div class="hero-grid"></div>
  <span class="float-s" style="top:15%;left:6%;animation-delay:0s">‚à´</span>
  <span class="float-s" style="top:60%;left:3%;animation-delay:1.5s">œÄ</span>
  <span class="float-s" style="top:25%;right:8%;animation-delay:.8s">‚àë</span>
  <span class="float-s" style="top:70%;right:5%;animation-delay:2.2s">‚àû</span>
  <span class="float-s" style="top:40%;left:50%;animation-delay:3s">‚àà</span>
  <div class="max-w-6xl mx-auto px-4 sm:px-6 relative z-10">
    <div class="max-w-2xl">
      <div class="inline-flex items-center gap-2 bg-amber-500/15 border border-amber-500/30 rounded-full px-3 py-1 mb-4">
        <span class="w-1.5 h-1.5 rounded-full bg-amber-400 animate-pulse"></span>
        <span class="text-amber-300 text-[10px] font-bold uppercase tracking-widest">Claude AI ¬∑ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
      </div>
      <h1 class="text-3xl sm:text-4xl font-extrabold text-white mb-3 leading-tight">
        ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå<br><span class="text-amber-400">‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</span> ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∂‡∏Å‡∏ã‡∏∂‡πâ‡∏á
      </h1>
      <p class="text-stone-400 text-sm leading-relaxed mb-6 max-w-lg">‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏ó‡∏≤‡∏á‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏° AI ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ ‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</p>
      <div class="flex flex-wrap gap-2">
        <div class="flex items-center gap-1.5 bg-white/8 border border-white/10 rounded-lg px-3 py-1.5 text-[11px] font-semibold text-stone-300">üß† ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ AI</div>
        <div class="flex items-center gap-1.5 bg-white/8 border border-white/10 rounded-lg px-3 py-1.5 text-[11px] font-semibold text-stone-300">üìù ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå</div>
        <div class="flex items-center gap-1.5 bg-white/8 border border-white/10 rounded-lg px-3 py-1.5 text-[11px] font-semibold text-stone-300">üó∫Ô∏è Learning Roadmap</div>
        <div class="flex items-center gap-1.5 bg-white/8 border border-white/10 rounded-lg px-3 py-1.5 text-[11px] font-semibold text-stone-300">üëÅÔ∏è Quiz Mode</div>
      </div>
    </div>
  </div>
</section>

<!-- MAIN -->
<main class="max-w-6xl mx-auto px-4 sm:px-6 py-8 flex-grow w-full space-y-6">

  <!-- STATS -->
  <div class="grid grid-cols-2 sm:grid-cols-4 gap-3" id="stats-row"></div>

  <!-- FILTER + SEARCH -->
  <div class="bg-white border border-stone-200 rounded-2xl p-5 shadow-sm">
    <div class="flex items-center justify-between mb-3">
      <h2 class="font-bold text-stone-800 text-sm flex items-center gap-2">üîñ ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h2>
      <button onclick="toggleRoadmap()" class="flex items-center gap-1.5 text-xs font-bold px-3 py-1.5 rounded-xl bg-stone-900 text-amber-400 hover:bg-stone-800 transition-all border border-stone-700 active:scale-95">
        üó∫Ô∏è ‡∏™‡∏£‡πâ‡∏≤‡∏á Roadmap
      </button>
    </div>
    <div id="cat-pills" class="flex flex-wrap gap-2 mb-3"></div>
    <div class="relative">
      <span class="absolute left-3.5 top-1/2 -translate-y-1/2 text-stone-400 pointer-events-none">üîç</span>
      <input id="search-box" type="text" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå... ‡πÄ‡∏ä‡πà‡∏ô integral, log, ‡πÄ‡∏ã‡∏ï, ‚àë"
        class="w-full pl-10 pr-4 py-2.5 border border-stone-200 rounded-xl text-sm bg-stone-50 text-stone-800 placeholder-stone-400 transition-all"
        oninput="onSearch(this.value)">
    </div>
  </div>

  <!-- ROADMAP -->
  <div id="roadmap-section">
    <div class="bg-stone-900 rounded-2xl border border-stone-700 p-6 shadow-xl relative overflow-hidden">
      <div class="absolute top-3 right-4 text-6xl opacity-5 font-serif">üó∫Ô∏è</div>
      <div class="flex items-center justify-between mb-4">
        <h3 class="font-bold text-amber-400 flex items-center gap-2">üöÄ AI Learning Roadmap: <span id="roadmap-cat-name" class="text-white ml-1">-</span></h3>
        <button onclick="closeRoadmap()" class="w-7 h-7 rounded-full bg-stone-700 hover:bg-stone-600 text-stone-300 flex items-center justify-center text-xs transition-colors">‚úï</button>
      </div>
      <div id="roadmap-result" class="text-sm leading-relaxed ai-body text-stone-300 min-h-[60px]"></div>
    </div>
  </div>

  <!-- GRID -->
  <div>
    <div class="flex items-center justify-between mb-3">
      <h2 id="grid-title" class="font-bold text-stone-800 text-sm flex items-center gap-2">üìê ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
      <span id="result-count" class="text-xs text-stone-400 font-medium bg-stone-100 px-2.5 py-1 rounded-full border border-stone-200"></span>
    </div>
    <div id="empty-state" class="hidden text-center py-16 bg-stone-50 rounded-2xl border border-dashed border-stone-300">
      <span class="text-5xl block mb-3 opacity-30">üîç</span>
      <p class="text-stone-500 font-medium text-sm">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô</p>
      <button onclick="clearSearch()" class="mt-3 text-amber-600 text-xs font-bold hover:underline">‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
    </div>
    <div id="sym-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3"></div>
  </div>

  <!-- CHART -->
  <div class="bg-white border border-stone-200 rounded-2xl p-6 shadow-sm">
    <h2 class="font-bold text-stone-800 text-sm mb-4 flex items-center gap-2">üìä ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î</h2>
    <div style="position:relative;height:260px"><canvas id="dist-chart"></canvas></div>
  </div>

</main>

<!-- MODAL -->
<div id="modal-overlay" class="m-hide fixed inset-0 bg-black/60 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4">
  <div id="modal-box" class="bg-white w-full sm:max-w-2xl sm:rounded-2xl rounded-t-2xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden">
    <div class="bg-gradient-to-r from-stone-900 to-stone-800 p-5 flex items-center justify-between shrink-0">
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 bg-amber-400/15 border border-amber-400/30 rounded-2xl flex items-center justify-center">
          <span id="modal-sym" class="text-2xl font-serif text-amber-300">‚àë</span>
        </div>
        <div>
          <h3 id="modal-title" class="text-white font-bold text-base leading-tight">Symbol</h3>
          <p id="modal-sub" class="text-stone-400 text-xs mt-0.5">‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</p>
        </div>
      </div>
      <button onclick="closeModal()" class="w-8 h-8 rounded-full bg-stone-700 hover:bg-stone-600 text-stone-300 flex items-center justify-center transition-colors">‚úï</button>
    </div>
    <div class="grid grid-cols-4 gap-2 px-5 pt-4 shrink-0">
      <button onclick="askAI('explain')" class="mode-btn bg-amber-50 border-amber-200 text-amber-700 hover:bg-amber-100"><span class="text-lg">üìö</span>‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</button>
      <button onclick="askAI('example')" class="mode-btn bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100"><span class="text-lg">üí°</span>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
      <button onclick="askAI('problem')" class="mode-btn bg-green-50 border-green-200 text-green-700 hover:bg-green-100"><span class="text-lg">üéØ</span>‡πÇ‡∏à‡∏ó‡∏¢‡πå</button>
      <button onclick="askAI('realworld')" class="mode-btn bg-purple-50 border-purple-200 text-purple-700 hover:bg-purple-100"><span class="text-lg">üåç</span>‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á</button>
    </div>
    <div class="flex-grow overflow-y-auto px-5 pt-3 pb-4">
      <div id="ai-response" class="text-sm text-stone-700 bg-stone-50 border border-stone-100 rounded-xl p-5 ai-body min-h-[180px]">
        <div class="flex flex-col items-center justify-center h-full opacity-40 py-8 gap-2">
          <span class="text-3xl">üí¨</span>
          <p class="text-xs font-medium">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡∏Å‡∏±‡∏ö AI</p>
        </div>
      </div>
    </div>
    <div class="bg-stone-50 border-t border-stone-100 px-5 py-2.5 text-center shrink-0">
      <p class="text-[9px] text-stone-400">Powered by Claude AI ¬∑ ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer class="bg-white border-t border-stone-200 py-6">
  <div class="max-w-6xl mx-auto px-4 text-center">
    <div class="flex items-center justify-center gap-2 mb-1">
      <div class="w-5 h-5 bg-gradient-to-br from-amber-400 to-orange-500 rounded-md flex items-center justify-center">
        <span class="text-white text-[9px] font-bold">‚àë</span>
      </div>
      <span class="font-bold text-stone-800 text-sm">Math Explorer Pro</span>
    </div>
    <p class="text-[10px] text-stone-400">Powered by Claude AI ¬∑ <span id="footer-count">0</span> ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå ¬∑ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏ô‡∏∏‡∏Å</p>
  </div>
</footer>

<script>
const symbols=[
  {s:"‚àë",en:"Summation",th:"‡∏ú‡∏•‡∏£‡∏ß‡∏° (‡∏ã‡∏¥‡∏Å‡∏°‡∏≤)",cat:"Special",col:"amber"},
  {s:"‚àè",en:"Product (Pi)",th:"‡∏ú‡∏•‡∏Ñ‡∏π‡∏ì",cat:"Special",col:"amber"},
  {s:"‚àû",en:"Infinity",th:"‡∏≠‡∏ô‡∏±‡∏ô‡∏ï‡πå",col:"amber",cat:"Special"},
  {s:"‚àö",en:"Square Root",th:"‡∏£‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á",cat:"Special",col:"amber"},
  {s:"‚àõ",en:"Cube Root",th:"‡∏£‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°",cat:"Special",col:"amber"},
  {s:"œÄ",en:"Pi",th:"‡∏û‡∏≤‡∏¢ (3.14159‚Ä¶)",cat:"Special",col:"amber"},
  {s:"e",en:"Euler's Number",th:"‡∏Ñ‡πà‡∏≤ e (2.718‚Ä¶)",cat:"Special",col:"amber"},
  {s:"i",en:"Imaginary Unit",th:"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏à‡∏¥‡∏ô‡∏ï‡∏†‡∏≤‡∏û",cat:"Special",col:"amber"},
  {s:"!",en:"Factorial",th:"‡πÅ‡∏ü‡∏Å‡∏ó‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏•",cat:"Special",col:"amber"},
  {s:"œÜ",en:"Golden Ratio",th:"‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏≠‡∏á",cat:"Special",col:"amber"},
  {s:"‚àÄ",en:"For All",th:"‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å",cat:"Logic",col:"blue"},
  {s:"‚àÉ",en:"There Exists",th:"‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏´‡∏ô‡∏∂‡πà‡∏á",cat:"Logic",col:"blue"},
  {s:"‚àÑ",en:"Not Exists",th:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà",cat:"Logic",col:"blue"},
  {s:"¬¨",en:"Negation (NOT)",th:"‡∏ô‡∏¥‡πÄ‡∏™‡∏ò (‡πÑ‡∏°‡πà)",cat:"Logic",col:"blue"},
  {s:"‚àß",en:"AND",th:"‡∏ï‡∏£‡∏£‡∏Å‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡πÅ‡∏•‡∏∞",cat:"Logic",col:"blue"},
  {s:"‚à®",en:"OR",th:"‡∏ï‡∏£‡∏£‡∏Å‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏´‡∏£‡∏∑‡∏≠",cat:"Logic",col:"blue"},
  {s:"‚áí",en:"Implication",th:"‡∏ô‡∏±‡∏¢‡∏ß‡πà‡∏≤ (‡∏ñ‡πâ‡∏≤‚Ä¶‡πÅ‡∏•‡πâ‡∏ß)",cat:"Logic",col:"blue"},
  {s:"‚áî",en:"Biconditional (IFF)",th:"‡∏Å‡πá‡∏ï‡πà‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠",cat:"Logic",col:"blue"},
  {s:"‚äï",en:"XOR",th:"‡πÄ‡∏≠‡πá‡∏Å‡∏ã‡πå‡∏≠‡∏≠‡∏£‡πå",cat:"Logic",col:"blue"},
  {s:"‚ä§",en:"Tautology",th:"‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏™‡∏°‡∏≠",cat:"Logic",col:"blue"},
  {s:"‚àà",en:"Element of",th:"‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å",cat:"Set Theory",col:"green"},
  {s:"‚àâ",en:"Not Element of",th:"‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å",cat:"Set Theory",col:"green"},
  {s:"‚äÜ",en:"Subset",th:"‡∏™‡∏±‡∏ö‡πÄ‡∏ã‡∏ï",cat:"Set Theory",col:"green"},
  {s:"‚äÇ",en:"Proper Subset",th:"‡∏™‡∏±‡∏ö‡πÄ‡∏ã‡∏ï‡πÅ‡∏ó‡πâ",cat:"Set Theory",col:"green"},
  {s:"‚äá",en:"Superset",th:"‡∏ã‡∏π‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡∏ï",cat:"Set Theory",col:"green"},
  {s:"‚à™",en:"Union",th:"‡∏¢‡∏π‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô (‡∏£‡∏ß‡∏°)",cat:"Set Theory",col:"green"},
  {s:"‚à©",en:"Intersection",th:"‡∏≠‡∏¥‡∏ô‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏ã‡∏Å‡∏ä‡∏±‡∏ô",cat:"Set Theory",col:"green"},
  {s:"‚àÖ",en:"Empty Set",th:"‡πÄ‡∏ã‡∏ï‡∏ß‡πà‡∏≤‡∏á",cat:"Set Theory",col:"green"},
  {s:"‚àÅ",en:"Complement",th:"‡∏Ñ‡∏≠‡∏°‡∏û‡∏•‡∏µ‡πÄ‡∏°‡∏ô‡∏ï‡πå",cat:"Set Theory",col:"green"},
  {s:"|A|",en:"Cardinality",th:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å",cat:"Set Theory",col:"green"},
  {s:"‚Ñï",en:"Natural Numbers",th:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö (1,2,3‚Ä¶)",cat:"Numbers",col:"violet"},
  {s:"‚Ñ§",en:"Integers",th:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°",cat:"Numbers",col:"violet"},
  {s:"‚Ñö",en:"Rational Numbers",th:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏£‡∏£‡∏Å‡∏¢‡∏∞",cat:"Numbers",col:"violet"},
  {s:"‚Ñù",en:"Real Numbers",th:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏£‡∏¥‡∏á",cat:"Numbers",col:"violet"},
  {s:"‚ÑÇ",en:"Complex Numbers",th:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡∏ã‡πâ‡∏≠‡∏ô",cat:"Numbers",col:"violet"},
  {s:"‚Ñô",en:"Prime Numbers",th:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞",cat:"Numbers",col:"violet"},
  {s:"‚âà",en:"Approximately Equal",th:"‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì",cat:"Comparison",col:"orange"},
  {s:"‚â†",en:"Not Equal",th:"‡πÑ‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö",cat:"Comparison",col:"orange"},
  {s:"‚â§",en:"Less Than or Equal",th:"‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤",cat:"Comparison",col:"orange"},
  {s:"‚â•",en:"Greater Than or Equal",th:"‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤",cat:"Comparison",col:"orange"},
  {s:"‚â™",en:"Much Less Than",th:"‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏°‡∏≤‡∏Å",cat:"Comparison",col:"orange"},
  {s:"‚â´",en:"Much Greater Than",th:"‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏°‡∏≤‡∏Å",cat:"Comparison",col:"orange"},
  {s:"‚àù",en:"Proportional To",th:"‡πÅ‡∏õ‡∏£‡∏ú‡∏±‡∏ô‡∏ï‡∏£‡∏á",cat:"Comparison",col:"orange"},
  {s:"‚à´",en:"Integral",th:"‡∏≠‡∏¥‡∏ô‡∏ó‡∏¥‡∏Å‡∏£‡∏±‡∏•",cat:"Calculus",col:"rose"},
  {s:"‚à¨",en:"Double Integral",th:"‡∏≠‡∏¥‡∏ô‡∏ó‡∏¥‡∏Å‡∏£‡∏±‡∏•‡∏™‡∏≠‡∏á‡∏ä‡∏±‡πâ‡∏ô",cat:"Calculus",col:"rose"},
  {s:"‚àÆ",en:"Line Integral",th:"‡∏≠‡∏¥‡∏ô‡∏ó‡∏¥‡∏Å‡∏£‡∏±‡∏•‡πÄ‡∏™‡πâ‡∏ô",cat:"Calculus",col:"rose"},
  {s:"‚àÇ",en:"Partial Derivative",th:"‡∏≠‡∏ô‡∏∏‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏¢‡πà‡∏≠‡∏¢",cat:"Calculus",col:"rose"},
  {s:"d/dx",en:"Derivative",th:"‡∏≠‡∏ô‡∏∏‡∏û‡∏±‡∏ô‡∏ò‡πå",cat:"Calculus",col:"rose"},
  {s:"lim",en:"Limit",th:"‡∏•‡∏¥‡∏°‡∏¥‡∏ï",cat:"Calculus",col:"rose"},
  {s:"‚àÜ",en:"Delta (Change)",th:"‡πÄ‡∏î‡∏•‡∏ï‡∏≤ (‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á)",cat:"Calculus",col:"rose"},
  {s:"‚àá",en:"Nabla (Gradient)",th:"‡∏ô‡∏≤‡∏ö‡∏•‡∏≤ (‡πÄ‡∏Å‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ô‡∏ï‡πå)",cat:"Calculus",col:"rose"},
  {s:"‚à†",en:"Angle",th:"‡∏°‡∏∏‡∏°",cat:"Geometry",col:"teal"},
  {s:"‚ñ≥",en:"Triangle",th:"‡∏™‡∏≤‡∏°‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°",cat:"Geometry",col:"teal"},
  {s:"‚à•",en:"Parallel",th:"‡∏Ç‡∏ô‡∏≤‡∏ô",cat:"Geometry",col:"teal"},
  {s:"‚ä•",en:"Perpendicular",th:"‡∏ï‡∏±‡πâ‡∏á‡∏â‡∏≤‡∏Å",cat:"Geometry",col:"teal"},
  {s:"¬∞",en:"Degree",th:"‡∏≠‡∏á‡∏®‡∏≤",cat:"Geometry",col:"teal"},
  {s:"‚âÖ",en:"Congruent",th:"‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏£",cat:"Geometry",col:"teal"},
  {s:"‚àº",en:"Similar",th:"‡∏£‡∏π‡∏õ‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô",cat:"Geometry",col:"teal"},
  {s:"‚åÄ",en:"Diameter",th:"‡πÄ‡∏™‡πâ‡∏ô‡∏ú‡πà‡∏≤‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á",cat:"Geometry",col:"teal"},
  {s:"f(x)",en:"Function of x",th:"‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ç‡∏≠‡∏á x",cat:"Functions",col:"indigo"},
  {s:"log",en:"Logarithm",th:"‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡∏¥‡∏ó‡∏∂‡∏° (‡∏ê‡∏≤‡∏ô 10)",cat:"Functions",col:"indigo"},
  {s:"ln",en:"Natural Log",th:"‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡∏¥‡∏ó‡∏∂‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥",cat:"Functions",col:"indigo"},
  {s:"sin",en:"Sine",th:"‡πÑ‡∏ã‡∏ô‡πå",cat:"Functions",col:"indigo"},
  {s:"cos",en:"Cosine",th:"‡πÇ‡∏Ñ‡πÑ‡∏ã‡∏ô‡πå",cat:"Functions",col:"indigo"},
  {s:"tan",en:"Tangent",th:"‡πÅ‡∏ó‡∏ô‡πÄ‡∏à‡∏ô‡∏ï‡πå",cat:"Functions",col:"indigo"},
  {s:"f‚Åª¬π",en:"Inverse Function",th:"‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ú‡∏Å‡∏ú‡∏±‡∏ô",cat:"Functions",col:"indigo"},
  {s:"f‚àòg",en:"Composition",th:"‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö",cat:"Functions",col:"indigo"},
  {s:"‚â°",en:"Congruence mod",th:"‡∏™‡∏°‡∏†‡∏≤‡∏Ñ mod",cat:"Number Theory",col:"pink"},
  {s:"‚à£",en:"Divides",th:"‡∏´‡∏≤‡∏£‡∏•‡∏á‡∏ï‡∏±‡∏ß",cat:"Number Theory",col:"pink"},
  {s:"‚à§",en:"Does Not Divide",th:"‡πÑ‡∏°‡πà‡∏•‡∏á‡∏ï‡∏±‡∏ß",cat:"Number Theory",col:"pink"},
  {s:"gcd",en:"GCD (HCF)",th:"‡∏´.‡∏£.‡∏°.",cat:"Number Theory",col:"pink"},
  {s:"lcm",en:"LCM",th:"‡∏Ñ.‡∏£.‡∏ô.",cat:"Number Theory",col:"pink"},
  {s:"C(n,k)",en:"Combination",th:"‡∏™‡∏±‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏ß‡∏¥‡∏ô‡∏≤‡∏°",cat:"Number Theory",col:"pink"},
  {s:"Œº",en:"Mean (Population)",th:"‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£ (‡∏°‡∏¥‡∏ß)",cat:"Statistics",col:"cyan"},
  {s:"œÉ",en:"Std Dev",th:"‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏ö‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏ö‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô",cat:"Statistics",col:"cyan"},
  {s:"xÃÑ",en:"Sample Mean",th:"‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á",cat:"Statistics",col:"cyan"},
  {s:"P(A)",en:"Probability",th:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á A",cat:"Statistics",col:"cyan"},
  {s:"E[X]",en:"Expected Value",th:"‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á",cat:"Statistics",col:"cyan"},
  {s:"œÅ",en:"Correlation",th:"‡∏™‡∏´‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå (‡πÇ‡∏£)",cat:"Statistics",col:"cyan"},
  {s:"‚Üív",en:"Vector",th:"‡πÄ‡∏ß‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå v",cat:"Vectors",col:"yellow"},
  {s:"‚Äñv‚Äñ",en:"Vector Norm",th:"‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå",cat:"Vectors",col:"yellow"},
  {s:"¬∑",en:"Dot Product",th:"‡∏î‡∏≠‡∏ó‡πÇ‡∏õ‡∏£‡∏î‡∏±‡∏Å‡∏ï‡πå",cat:"Vectors",col:"yellow"},
  {s:"det",en:"Determinant",th:"‡∏î‡∏µ‡πÄ‡∏ó‡∏≠‡∏£‡πå‡∏°‡∏¥‡πÅ‡∏ô‡∏ô‡∏ï‡πå",cat:"Vectors",col:"yellow"},
  {s:"A·µÄ",en:"Transpose",th:"‡πÄ‡∏°‡∏ó‡∏£‡∏¥‡∏Å‡∏ã‡πå‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡πÇ‡∏û‡∏™",cat:"Vectors",col:"yellow"},
  {s:"A‚Åª¬π",en:"Inverse Matrix",th:"‡∏≠‡∏¥‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏™‡πÄ‡∏°‡∏ó‡∏£‡∏¥‡∏Å‡∏ã‡πå",cat:"Vectors",col:"yellow"},
  {s:"Œª",en:"Eigenvalue",th:"‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞ (‡πÅ‡∏•‡∏°‡∏î‡∏≤)",cat:"Vectors",col:"yellow"},
  {s:"‚ä¢",en:"Provable",th:"‡∏û‡∏¥‡∏™‡∏π‡∏à‡∏ô‡πå‡πÑ‡∏î‡πâ",cat:"Adv Logic",col:"gray"},
  {s:"‚ä®",en:"Entails",th:"‡∏™‡∏°‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏°‡∏ú‡∏•",cat:"Adv Logic",col:"gray"},
  {s:"‚óª",en:"Necessity",th:"‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô (Modal)",cat:"Adv Logic",col:"gray"},
  {s:"‚óá",en:"Possibility",th:"‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ (Modal)",cat:"Adv Logic",col:"gray"},
];

const CM={amber:"bg-amber-50 text-amber-700 border-amber-200",blue:"bg-blue-50 text-blue-700 border-blue-200",green:"bg-green-50 text-green-700 border-green-200",violet:"bg-violet-50 text-violet-700 border-violet-200",orange:"bg-orange-50 text-orange-700 border-orange-200",rose:"bg-rose-50 text-rose-700 border-rose-200",teal:"bg-teal-50 text-teal-700 border-teal-200",indigo:"bg-indigo-50 text-indigo-700 border-indigo-200",pink:"bg-pink-50 text-pink-700 border-pink-200",cyan:"bg-cyan-50 text-cyan-700 border-cyan-200",yellow:"bg-yellow-50 text-yellow-700 border-yellow-200",gray:"bg-stone-50 text-stone-700 border-stone-200"};
const CE={Special:"‚ö°",Logic:"üß©","Set Theory":"üóÇ",Numbers:"üî¢",Comparison:"‚öñÔ∏è",Calculus:"üìà",Geometry:"üìê",Functions:"üéõ","Number Theory":"üîê",Statistics:"üìä",Vectors:"üß≠","Adv Logic":"üèõ"};
const TH={'All':'‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î','Special':'‡∏û‡∏¥‡πÄ‡∏®‡∏©','Logic':'‡∏ï‡∏£‡∏£‡∏Å‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå','Set Theory':'‡∏ó‡∏§‡∏©‡∏é‡∏µ‡πÄ‡∏ã‡∏ï','Numbers':'‡πÄ‡∏ã‡∏ï‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç','Comparison':'‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö','Calculus':'‡πÅ‡∏Ñ‡∏•‡∏Ñ‡∏π‡∏•‡∏±‡∏™','Geometry':'‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï','Functions':'‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô','Number Theory':'‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô','Statistics':'‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥','Vectors':'‡πÄ‡∏ß‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå/‡πÄ‡∏°‡∏ó‡∏£‡∏¥‡∏Å‡∏ã‡πå','Adv Logic':'‡∏ï‡∏£‡∏£‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á'};

let curCat='All',searchQ='',quizOn=false,curSym=null,roadmapOpen=false;

window.addEventListener('DOMContentLoaded',()=>{
  buildStats(); buildCats(); renderGrid(); buildChart();
  const n=symbols.length;
  document.getElementById('count-num').textContent=n;
  document.getElementById('footer-count').textContent=n;
  document.addEventListener('keydown',e=>{if(e.key==='Escape')closeModal();});
});

function buildStats(){
  const cats=[...new Set(symbols.map(s=>s.cat))];
  document.getElementById('stats-row').innerHTML=[
    {label:"‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",value:symbols.length,icon:"üìê"},
    {label:"‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà",value:cats.length,icon:"üóÇÔ∏è"},
    {label:"AI ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ",value:"100%",icon:"ü§ñ"},
    {label:"‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢/EN",value:"2 ‡∏†‡∏≤‡∏©‡∏≤",icon:"üåê"},
  ].map(it=>`<div class="bg-white border border-stone-200 rounded-xl p-4 text-center hover:border-amber-200 hover:shadow-md transition-all">
    <div class="text-2xl mb-1">${it.icon}</div>
    <div class="font-extrabold text-stone-900 text-xl">${it.value}</div>
    <div class="text-[10px] text-stone-400 font-semibold mt-0.5">${it.label}</div>
  </div>`).join('');
}

function buildCats(){
  const cats=['All',...[...new Set(symbols.map(s=>s.cat))]];
  document.getElementById('cat-pills').innerHTML=cats.map(c=>`<button class="cat-pill${c===curCat?' active':''}" onclick="setCat('${c}')">${CE[c]||'üìö'} ${TH[c]||c}</button>`).join('');
}

function setCat(cat){
  curCat=cat; buildCats(); renderGrid();
  document.getElementById('roadmap-cat-name').textContent=TH[cat]||cat;
  document.getElementById('grid-title').innerHTML=`<span>${CE[cat]||'üìê'}</span> ${TH[cat]||'‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'}`;
}

function getFiltered(){
  const q=searchQ.toLowerCase().trim();
  return symbols.filter(it=>{
    const ok=curCat==='All'||it.cat===curCat;
    if(!q)return ok;
    return ok&&(it.s.toLowerCase().includes(q)||it.en.toLowerCase().includes(q)||it.th.toLowerCase().includes(q)||it.cat.toLowerCase().includes(q));
  });
}

function renderGrid(){
  const list=getFiltered();
  const grid=document.getElementById('sym-grid');
  const empty=document.getElementById('empty-state');
  document.getElementById('result-count').textContent=`‡πÅ‡∏™‡∏î‡∏á ${list.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
  if(!list.length){grid.innerHTML='';empty.classList.remove('hidden');return;}
  empty.classList.add('hidden');
  grid.innerHTML=list.map((it,i)=>`
    <div class="sym-card p-4 flex flex-col items-center text-center h-full justify-between group" onclick="openModal(${i})">
      <div class="flex items-center justify-center w-full h-14 mb-3">
        <span class="text-3xl sm:text-4xl font-serif text-stone-800 group-hover:scale-110 transition-transform select-none">${it.s}</span>
      </div>
      <div class="w-full flex-grow flex flex-col items-center justify-center gap-1 mb-3">
        <div class="font-bold text-stone-800 text-xs leading-tight">${it.en}</div>
        <div class="text-stone-500 text-[10px] quiz-hide leading-snug">${it.th}</div>
      </div>
      <div class="w-full flex items-center justify-between">
        <span class="text-[9px] font-bold px-2 py-0.5 rounded-full border ${CM[it.col]||CM.gray}">${it.cat}</span>
        <span class="text-[10px] font-bold text-stone-400 group-hover:text-amber-600 transition-colors">‚ú® AI</span>
      </div>
    </div>
  `).join('');
}

function onSearch(v){searchQ=v;renderGrid();}
function clearSearch(){document.getElementById('search-box').value='';searchQ='';renderGrid();}

function toggleQuiz(){
  quizOn=!quizOn;
  document.body.classList.toggle('quiz-on',quizOn);
  const btn=document.getElementById('quiz-btn');
  document.getElementById('quiz-icon').textContent=quizOn?'üôà':'üëÅÔ∏è';
  const lbl=document.getElementById('quiz-label');
  if(lbl)lbl.textContent=quizOn?'‡∏≠‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏ó‡πà‡∏≠‡∏á‡∏à‡∏≥':'‡πÇ‡∏´‡∏°‡∏î‡∏ó‡πà‡∏≠‡∏á‡∏à‡∏≥';
  if(quizOn){btn.classList.add('bg-amber-500','text-white','border-amber-600');btn.classList.remove('bg-stone-50','text-stone-600','border-stone-200');}
  else{btn.classList.remove('bg-amber-500','text-white','border-amber-600');btn.classList.add('bg-stone-50','text-stone-600','border-stone-200');}
}

function openModal(i){
  const list=getFiltered();const it=list[i];if(!it)return;
  curSym=it;
  document.getElementById('modal-sym').textContent=it.s;
  document.getElementById('modal-title').textContent=it.en;
  document.getElementById('modal-sub').textContent=`${it.th} ¬∑ ${it.cat}`;
  document.getElementById('ai-response').innerHTML='<div class="flex flex-col items-center justify-center h-full opacity-40 py-8 gap-2"><span class="text-3xl">üí¨</span><p class="text-xs font-medium">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡∏Å‡∏±‡∏ö AI</p></div>';
  const ov=document.getElementById('modal-overlay');
  ov.classList.remove('m-hide');ov.classList.add('m-show');
  document.body.style.overflow='hidden';
}

function closeModal(){
  const ov=document.getElementById('modal-overlay');
  ov.classList.add('m-hide');ov.classList.remove('m-show');
  document.body.style.overflow='';curSym=null;
}
document.getElementById('modal-overlay').addEventListener('click',function(e){if(e.target===this)closeModal();});

async function callClaude(prompt){
  try{
    const r=await fetch("https://api.anthropic.com/v1/messages",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({
        model:"claude-sonnet-4-20250514",max_tokens:1000,
        system:"‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏£‡∏π‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏™‡∏°‡∏≠ ‡πÉ‡∏ä‡πâ LaTeX ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö $...$ ‡∏ï‡∏≠‡∏ö‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡πÜ ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏≠‡∏á ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡∏¢‡∏≤‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô 400 ‡∏Ñ‡∏≥",
        messages:[{role:"user",content:prompt}]
      })
    });
    const d=await r.json();
    return d.content?.[0]?.text||"ü§î AI ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö";
  }catch(e){return`‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${e.message}`;}
}

async function askAI(mode){
  if(!curSym)return;
  const it=curSym;
  const P={
    explain:`‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå "${it.s}" (${it.en} / ${it.th}) ‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î ${it.cat} ‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‡∏ö‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ ‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ`,
    example:`‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå "${it.s}" (${it.en}) ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö`,
    problem:`‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢ 1 ‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö "${it.s}" (${it.en}) ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏â‡∏•‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î`,
    realworld:`‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ "${it.s}" (${it.en}) ‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏à‡∏£‡∏¥‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°/‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á`
  };
  const div=document.getElementById('ai-response');
  div.innerHTML='<div class="flex flex-col items-center justify-center py-10 gap-3"><div class="spinner"></div><span class="text-stone-500 text-xs font-semibold">AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•<span class="dots"></span></span></div>';
  const result=await callClaude(P[mode]);
  marked.setOptions({breaks:true,gfm:true});
  div.innerHTML='<div class="leading-relaxed text-sm">'+marked.parse(result)+'</div>';
  if(window.MathJax)MathJax.typesetPromise([div]).catch(console.error);
}

async function toggleRoadmap(){
  const sec=document.getElementById('roadmap-section');
  if(roadmapOpen){closeRoadmap();return;}
  roadmapOpen=true;sec.classList.add('open');
  sec.scrollIntoView({behavior:'smooth',block:'start'});
  const catName=curCat==='All'?'‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô':(TH[curCat]||curCat);
  document.getElementById('roadmap-cat-name').textContent=catName;
  document.getElementById('roadmap-result').innerHTML='<div class="flex items-center gap-3 py-4 justify-center"><div class="spinner" style="border-color:#44403c;border-top-color:#f59e0b;"></div><span class="text-stone-500 text-xs font-medium">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ<span class="dots"></span></span></div>';
  const prompt=`‡∏™‡∏£‡πâ‡∏≤‡∏á Learning Roadmap ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "${catName}" ‡πÉ‡∏ô‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏õ‡∏•‡∏≤‡∏¢ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢:
1. ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô (Step 1, 2, 3‚Ä¶)
2. ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô
3. ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à
‡∏ï‡∏≠‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ ‡∏™‡∏±‡πâ‡∏ô‡∏Å‡∏£‡∏∞‡∏ä‡∏±‡∏ö ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢`;
  const result=await callClaude(prompt);
  marked.setOptions({breaks:true,gfm:true});
  document.getElementById('roadmap-result').innerHTML='<div class="text-stone-300 text-sm">'+marked.parse(result)+'</div>';
  if(window.MathJax)MathJax.typesetPromise([document.getElementById('roadmap-result')]).catch(console.error);
}

function closeRoadmap(){roadmapOpen=false;document.getElementById('roadmap-section').classList.remove('open');}

function buildChart(){
  const counts={};symbols.forEach(s=>{counts[s.cat]=(counts[s.cat]||0)+1;});
  const labels=Object.keys(counts);const data=Object.values(counts);
  const colors=['#f59e0b','#3b82f6','#22c55e','#8b5cf6','#f97316','#ef4444','#14b8a6','#6366f1','#ec4899','#06b6d4','#eab308','#78716c'];
  new Chart(document.getElementById('dist-chart').getContext('2d'),{
    type:'bar',
    data:{labels,datasets:[{label:'‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå',data,backgroundColor:labels.map((_,i)=>colors[i%colors.length]+'cc'),borderColor:labels.map((_,i)=>colors[i%colors.length]),borderWidth:1.5,borderRadius:8,borderSkipped:false}]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},tooltip:{backgroundColor:'#1c1917',titleColor:'#f59e0b',bodyColor:'#e7e5e4',padding:10,cornerRadius:8,callbacks:{label:ctx=>`${ctx.raw} ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå`}}},scales:{y:{beginAtZero:true,grid:{color:'#f5f5f4'},ticks:{font:{size:10},color:'#a8a29e'}},x:{grid:{display:false},ticks:{font:{size:9},color:'#a8a29e'}}},animation:{duration:1400,easing:'easeOutQuart'}}
  });
}
</script>
</body>
</html>
